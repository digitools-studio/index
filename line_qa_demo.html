<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI æ··åˆå®¢æœæˆ°æƒ…å®¤ - æ·±åº¦å•†å‹™ç‰ˆ</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Noto+Sans+TC:wght@300;400;700;900&display=swap');
        
        :root {
            --primary: #3b82f6;
            --line-green: #00B900;
            --line-chat-bg: #8cabd9;
            --bg-dark: #0f172a;
            --card-bg: #1e293b;
        }

        * { box-sizing: border-box; }

        body { 
            font-family: 'Inter', 'Noto Sans TC', sans-serif; 
            background-color: var(--bg-dark);
            color: #f8fafc;
            overflow-x: hidden;
        }

        /* åƒæ•¸é…ç½®é¢æ¿ */
        .config-panel {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(34, 211, 238, 0.05));
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }

        .config-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-top: 12px;
        }

        .config-input {
            display: flex;
            flex-direction: column;
        }

        .config-input label {
            font-size: 12px;
            font-weight: 600;
            color: #94a3b8;
            margin-bottom: 6px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .config-input input,
        .config-input select {
            padding: 10px 12px;
            background: rgba(30, 41, 59, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            color: #f1f5f9;
            font-size: 13px;
            transition: all 0.2s;
        }

        .config-input input::placeholder {
            color: #64748b;
        }

        .config-input input:focus,
        .config-input select:focus {
            outline: none;
            background: rgba(30, 41, 59, 1);
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
        }

        /* select é¸é …æ¨£å¼ */
        .config-input select option {
            background: #1e293b;
            color: #f1f5f9;
            padding: 8px;
        }

        .config-input select option:hover {
            background: #3b82f6;
        }

        /* é€²åº¦æ¢å‹•ç•« */
        @keyframes progress-fill {
            from { width: 0; opacity: 0; }
            to { width: var(--progress); opacity: 1; }
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
            margin-top: 8px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #22d3ee);
            border-radius: 3px;
            transition: width 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 0 10px rgba(59, 130, 246, 0.6);
        }

        /* çµ±è¨ˆå¡ç‰‡ */
        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 12px;
            text-align: center;
            transition: all 0.3s;
        }

        .stat-card:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(59, 130, 246, 0.3);
            transform: translateY(-2px);
        }

        .stat-value {
            font-size: 20px;
            font-weight: 800;
            color: var(--primary);
            display: block;
        }

        .stat-label {
            font-size: 11px;
            color: #94a3b8;
            margin-top: 4px;
            text-transform: uppercase;
        }

        /* æ­¥é©Ÿé€²åº¦è¦–è¦ºåŒ– */
        .step-timeline {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            flex-wrap: wrap;
        }

        .timeline-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transition: all 0.3s;
            cursor: pointer;
        }

        .timeline-dot.active {
            background: var(--primary);
            box-shadow: 0 0 12px rgba(59, 130, 246, 0.6);
            transform: scale(1.3);
        }

        .timeline-dot.completed {
            background: #10b981;
        }

        /* å‹•ç•«å¢å¼· */
        @keyframes slide-in-up {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse-glow {
            0%, 100% {
                box-shadow: 0 0 10px rgba(59, 130, 246, 0.3);
            }
            50% {
                box-shadow: 0 0 20px rgba(59, 130, 246, 0.6);
            }
        }

        .animate-slide-in {
            animation: slide-in-up 0.4s ease-out;
        }

        .pulse-glow {
            animation: pulse-glow 2s ease-in-out infinite;
        }

        /* æƒ…æ„ŸæŒ‡æ¨™ */
        .sentiment-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            margin-top: 8px;
        }

        .sentiment-positive {
            background: rgba(16, 185, 129, 0.2);
            color: #86efac;
            border: 1px solid rgba(16, 185, 129, 0.4);
        }

        .sentiment-neutral {
            background: rgba(100, 116, 139, 0.2);
            color: #cbd5e1;
            border: 1px solid rgba(100, 116, 139, 0.4);
        }

        .sentiment-negative {
            background: rgba(239, 68, 68, 0.2);
            color: #fca5a5;
            border: 1px solid rgba(239, 68, 68, 0.4);
        }

        /* çŸ¥è­˜ä¾†æºä¸Šå‚³å€å¡Š */
        .knowledge-sources {
            background: rgba(16, 185, 129, 0.05);
            border: 1px solid rgba(16, 185, 129, 0.2);
            border-radius: 12px;
            padding: 14px;
            margin-top: 12px;
        }

        .knowledge-sources h3 {
            font-size: 12px;
            font-weight: 600;
            color: #6ee7b7;
            margin: 0 0 10px 0;
            text-transform: uppercase;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .knowledge-sources h3 i {
            font-size: 10px;
        }

        .source-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .source-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 10px;
            background: rgba(16, 185, 129, 0.1);
            border-radius: 8px;
            border: 1px solid rgba(16, 185, 129, 0.15);
            font-size: 12px;
            color: #cbd5e1;
            transition: all 0.2s;
        }

        .source-item:hover {
            background: rgba(16, 185, 129, 0.15);
            border-color: rgba(16, 185, 129, 0.3);
        }

        .source-item i {
            font-size: 11px;
            color: #6ee7b7;
            flex-shrink: 0;
        }

        .source-item .source-name {
            flex: 1;
            min-width: 0;
        }

        .source-item .source-status {
            font-size: 10px;
            background: rgba(34, 197, 94, 0.2);
            color: #86efac;
            padding: 2px 8px;
            border-radius: 4px;
            white-space: nowrap;
        }

        .upload-prompt {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px;
            background: rgba(16, 185, 129, 0.08);
            border: 1px dashed rgba(16, 185, 129, 0.3);
            border-radius: 8px;
            font-size: 12px;
            color: #a7f3d0;
            cursor: pointer;
            transition: all 0.2s;
        }

        .upload-prompt:hover {
            background: rgba(16, 185, 129, 0.12);
            border-color: rgba(16, 185, 129, 0.5);
        }

        /* æƒ…å¢ƒæ¨¡æ“¬æŒ‰éˆ• */
        .scenarios-section {
            background: rgba(34, 211, 238, 0.08);
            border: 1px solid rgba(34, 211, 238, 0.2);
            border-radius: 12px;
            padding: 14px;
            margin-top: 12px;
        }

        .scenarios-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 10px;
        }

        .scenario-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 6px;
            padding: 14px 12px;
            border: 1px solid rgba(34, 211, 238, 0.3);
            border-radius: 10px;
            background: rgba(34, 211, 238, 0.05);
            color: #f1f5f9;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 11px;
        }

        .scenario-btn i {
            font-size: 20px;
        }

        .scenario-label {
            font-weight: 600;
            font-size: 12px;
        }

        .scenario-desc {
            font-size: 10px;
            color: #94a3b8;
        }

        .scenario-btn:hover {
            background: rgba(34, 211, 238, 0.15);
            border-color: rgba(34, 211, 238, 0.5);
            transform: translateY(-2px);
        }

        .scenario-btn:active {
            transform: translateY(0);
        }

        .scenario-quick {
            border-color: rgba(248, 113, 113, 0.3);
            background: rgba(248, 113, 113, 0.05);
        }

        .scenario-quick:hover {
            background: rgba(248, 113, 113, 0.15);
            border-color: rgba(248, 113, 113, 0.5);
        }

        .scenario-quick i {
            color: #f87171;
        }

        .scenario-standard {
            border-color: rgba(59, 130, 246, 0.3);
            background: rgba(59, 130, 246, 0.05);
        }

        .scenario-standard:hover {
            background: rgba(59, 130, 246, 0.15);
            border-color: rgba(59, 130, 246, 0.5);
        }

        .scenario-standard i {
            color: #3b82f6;
        }

        .scenario-premium {
            border-color: rgba(250, 204, 21, 0.3);
            background: rgba(250, 204, 21, 0.05);
        }

        .scenario-premium:hover {
            background: rgba(250, 204, 21, 0.15);
            border-color: rgba(250, 204, 21, 0.5);
        }

        .scenario-premium i {
            color: #facc15;
        }

        /* å®¢æˆ¶äº’å‹•æª”æ¡ˆæ¨£å¼ */
        .customer-profile-card {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(34, 211, 238, 0.05));
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 12px;
            padding: 14px;
            overflow: hidden;
        }

        .profile-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .profile-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(59, 130, 246, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: #3b82f6;
            flex-shrink: 0;
        }

        .profile-info {
            min-width: 0;
        }

        .profile-info h4 {
            font-size: 13px;
            font-weight: 600;
            color: #f1f5f9;
            margin: 0;
        }

        .profile-info p {
            font-size: 11px;
            color: #94a3b8;
            margin: 2px 0 0 0;
        }

        .profile-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }

        .stat-title {
            font-size: 9px;
            color: #94a3b8;
            text-transform: uppercase;
        }

        .stat-value {
            font-size: 13px;
            font-weight: 600;
            color: #3b82f6;
        }

        .profile-section {
            margin-bottom: 8px;
        }

        .profile-section:last-child {
            margin-bottom: 0;
        }

        .section-title {
            display: block;
            font-size: 10px;
            font-weight: 600;
            color: #6ee7b7;
            text-transform: uppercase;
            margin-bottom: 4px;
        }

        .section-content {
            font-size: 11px;
            color: #cbd5e1;
            line-height: 1.4;
            margin: 0;
        }

        /* å°è©±æ­·å²æ™‚é–“ç·š */
        .dialogue-history {
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .timeline {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .timeline-item {
            display: flex;
            gap: 12px;
        }

        .timeline-marker {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-top: 4px;
            flex-shrink: 0;
        }

        .timeline-marker.action {
            background: #22c55e;
        }

        .timeline-marker.vision {
            background: #eab308;
        }

        .timeline-marker.system {
            background: #3b82f6;
        }

        .timeline-content {
            flex: 1;
            min-width: 0;
        }

        .timeline-title {
            font-size: 11px;
            font-weight: 600;
            color: #e2e8f0;
            margin-bottom: 2px;
        }

        .timeline-desc {
            font-size: 10px;
            color: #94a3b8;
            line-height: 1.3;
            word-break: break-word;
        }

        /* æ‰‹æ©Ÿç‰ˆï¼šå…¨å¯¬èª¿æ•´ */
        @media (max-width: 1024px) {
            body { overflow: auto; }
            #app { min-h: auto; }
        }

        .phone-mockup {
            width: 100%;
            max-width: 320px;
            height: min(90vh, 720px);
            max-height: 720px;
            background: #000;
            border-radius: 40px;
            padding: 12px;
            box-shadow: 0 50px 100px -20px rgba(0,0,0,0.5);
            border: 4px solid #334155;
            position: relative;
        }

        @media (max-width: 768px) {
            .phone-mockup {
                border-radius: 12px;
                padding: 8px;
                height: calc(var(--vh, 1vh) * 100 - 32px);
                max-height: none;
                border: 2px solid #334155;
            }
        }

        .phone-inner {
            width: 100%;
            height: 100%;
            background: var(--line-chat-bg);
            border-radius: 30px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        @media (max-width: 768px) {
            .phone-inner {
                border-radius: 8px;
            }
        }

        .line-header {
            background: rgba(43, 58, 74, 0.95);
            backdrop-filter: blur(10px);
            color: white;
            padding: 35px 12px 10px 12px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 20;
            flex-shrink: 0;
        }

        .line-header .fas { font-size: 14px; }
        .line-header span { font-size: 13px; font-weight: bold; }

        @media (max-width: 768px) {
            .line-header {
                padding: 30px 10px 8px 10px;
            }
            .line-header span { font-size: 12px; }
            .line-header .fas { font-size: 12px; }
        }

        /* LINE Rich Menu - å„ªåŒ–è§¸æ§å¤§å° */
        .rich-menu {
            height: auto;
            background: white;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: auto;
            border-top: 1px solid #ddd;
            z-index: 30;
            flex-shrink: 0;
        }
        
        .menu-item {
            border: 0.5px solid #eee;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 12px 8px;
            cursor: pointer;
            min-height: 56px;
            transition: background-color 0.2s;
        }

        .menu-item:active {
            background-color: #f0f0f0;
        }

        .menu-item i { font-size: 16px; margin-bottom: 4px; color: var(--line-green); }
        .menu-item span { font-size: 9px; color: #333; font-weight: bold; line-height: 1.2; }

        /* Flex Message Styles - éŸ¿æ‡‰å¼å¯¬åº¦ */
        .flex-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 230px;
        }

        @media (max-width: 768px) {
            .flex-card {
                max-width: 200px;
            }
        }

        .flex-header { 
            background: #1a1a1a; 
            color: white; 
            padding: 10px; 
            font-size: 11px; 
            font-weight: bold; 
            word-break: break-word;
        }
        
        .flex-hero { 
            height: 100px; 
            background: #f8f9fa; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            border-bottom: 1px solid #eee; 
        }
        
        .flex-body { 
            padding: 12px; 
        }
        
        .flex-row { 
            display: flex; 
            justify-content: space-between; 
            margin-bottom: 6px; 
            font-size: 10px; 
            gap: 8px;
        }
        
        .flex-btn { 
            background: var(--line-green); 
            color: white; 
            text-align: center; 
            padding: 10px 8px; 
            border-radius: 6px; 
            font-size: 12px; 
            font-weight: bold; 
            margin-top: 8px; 
            cursor: pointer;
            border: none;
            transition: opacity 0.2s;
            min-height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .flex-btn:active {
            opacity: 0.8;
        }

        .line-bubble-user {
            background: #85e249;
            color: #000;
            border-radius: 15px 2px 15px 15px;
            padding: 10px 14px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
            word-break: break-word;
        }

        .line-bubble-bot {
            background: white;
            color: #000;
            border-radius: 2px 15px 15px 15px;
            padding: 10px 14px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
            word-break: break-word;
        }

        /* è®“èŠå¤©çª—åœ¨æ‰‹æ©Ÿä¸Šå¯ç”¨å…¨é«˜ä¸¦å¯æ²å‹•åˆ°åº• */
        #chat-box {
            flex: 1;
            min-height: 0;
        }

        @media (max-width: 768px) {
            #chat-box {
                max-height: calc(var(--vh, 1vh) * 100 - 200px);
            }
        }

        .premium-card {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
        }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        .animate-scan {
            background: linear-gradient(to bottom, transparent, rgba(59, 130, 246, 0.2), transparent);
            background-size: 100% 100px;
            animation: scan 2s linear infinite;
        }

        @keyframes scan {
            0% { background-position: 0 -100px; }
            100% { background-position: 0 700px; }
        }

        /* æ‰‹æ©Ÿç‰ˆä½ˆå±€ */
        @media (max-width: 1024px) {
            main {
                flex-direction: column !important;
                gap: 4px !important;
                align-items: stretch !important;
                padding: 0 !important;
                max-width: 100% !important;
            }

            .flex-1 {
                flex: none !important;
                width: 100%;
            }

            .grid {
                grid-template-columns: 1fr !important;
            }

            header {
                padding: 12px 16px !important;
            }

            .grid.grid-cols-1.xl\\:grid-cols-2 {
                grid-template-columns: 1fr !important;
            }
        }

        [v-cloak] { display: none; }
    </style>
</head>
<body>

<div id="app" v-cloak class="min-h-screen flex flex-col">
    <!-- é é¢ä»‹ç´¹å€å¡Š -->
    <section class="bg-gradient-to-r from-blue-900/40 to-cyan-900/40 border-b border-white/10">
        <div class="max-w-[1700px] mx-auto px-4 sm:px-6 py-6 sm:py-8">
            <div class="flex flex-col gap-6">
                <!-- æ¨™é¡Œå’Œèªªæ˜ -->
                <div class="animate-slide-in">
                    <h1 class="text-2xl sm:text-3xl font-black mb-2">
                        <span class="text-[#00B900]">â–¸ LINE AI æ··åˆå®¢æœæ™ºèƒ½å¼•æ“</span>
                    </h1>
                    <p class="text-sm sm:text-base text-slate-300 max-w-2xl">
                        åŸºæ–¼ Vision + RAG çš„å¤šæ¨¡æ…‹å®¢æœæ¼”ç¤ºã€‚é…ç½®æ‚¨çš„åº—å®¶åƒæ•¸ï¼ŒAI å°‡è‡ªå‹•é©é…èŠå¤©å…§å®¹ã€æ¨è–¦ç­–ç•¥å’Œå•†å‹™é‚è¼¯ã€‚
                    </p>
                </div>

                <!-- åƒæ•¸é…ç½®é¢æ¿ -->
                <div class="config-panel">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-sm font-bold text-white flex items-center gap-2">
                            <i class="fas fa-sliders-h text-blue-400"></i>
                            è‡ªç‡Ÿé›»å•†åŸºæœ¬ä¿¡æ¯è¨­å®š
                        </h2>
                        <button @click="showConfigTip = !showConfigTip" class="text-xs text-blue-400 hover:text-blue-300 transition">
                            {{ showConfigTip ? 'æ”¶èµ·æç¤º' : 'é¡¯ç¤ºæç¤º' }}
                        </button>
                    </div>
                    
                    <transition name="fade">
                        <p v-if="showConfigTip" class="text-xs text-slate-400 mb-4 bg-blue-500/10 p-3 rounded border border-blue-500/20">
                            ğŸ’¡ æç¤ºï¼šæ ¹æ“šä¸åŒå•†å“é¡åˆ¥ã€ç›®æ¨™å®¢ç¾¤å’Œå“ç‰Œæ•…äº‹ï¼ŒAI å°‡è‡ªå‹•èª¿æ•´ç”¢å“æ¨è–¦ã€Q&A å›ç­”å’Œç‡ŸéŠ·ç­–ç•¥ã€‚çŸ¥è­˜åº«æœƒè‡ªå‹•å¼•ç”¨ä½ ä¸Šå‚³çš„è³‡æºï¼
                        </p>
                    </transition>

                    <div class="config-grid">
                        <div class="config-input">
                            <label>åº—å®¶/å“ç‰Œåç¨±</label>
                            <input v-model="config.shopName" type="text" placeholder="ä¾‹ï¼šå„ªé¸å®¶å±…å®˜æ–¹å°ˆè³£" @input="onConfigChange">
                        </div>
                        <div class="config-input">
                            <label>ä¸»ç‡Ÿå•†å“é¡åˆ¥</label>
                            <select v-model="config.mainProduct" @change="onConfigChange">
                                <option value="smart-home">æ™ºæ…§å®¶å±…</option>
                                <option value="fashion">æœé£¾é…ä»¶</option>
                                <option value="beauty">ç¾å¦ä¿é¤Š</option>
                                <option value="food">é£Ÿå“é£²å“</option>
                                <option value="electronics">3C ç”¢å“</option>
                                <option value="home-decor">å±…å®¶è£é£¾</option>
                            </select>
                        </div>
                        <div class="config-input">
                            <label>ç›®æ¨™å®¢ç¾¤å®šä½</label>
                            <select v-model="config.targetAudience" @change="onConfigChange">
                                <option value="young">å¹´è¼•ä¸Šç­æ— (25-35)</option>
                                <option value="family">å®¶åº­å®¢æˆ¶ (35-50)</option>
                                <option value="premium">é«˜ç«¯æ¶ˆè²»è€… (50+)</option>
                                <option value="mixed">å…¨å¹´é½¡å±¤</option>
                            </select>
                        </div>
                        <div class="config-input">
                            <label>å“ç‰Œç‰¹è‰²/è³£é»</label>
                            <input v-model="config.brandStory" type="text" placeholder="ä¾‹ï¼šå …æŒå°ç£è£½é€ ã€ç’°ä¿å‹å–„" @input="onConfigChange">
                        </div>
                    </div>

                    <!-- çŸ¥è­˜ä¾†æºä¸Šå‚³å€å¡Š -->
                    <div class="knowledge-sources">
                        <h3>
                            <i class="fas fa-database"></i>
                            AI çŸ¥è­˜ä¾†æºåº«
                        </h3>
                        <div class="source-list">
                            <div v-for="(source, idx) in knowledgeSources" :key="idx" class="source-item animate-slide-in" :style="{ 'animation-delay': idx * 100 + 'ms' }">
                                <i :class="getSourceIcon(source.type)"></i>
                                <div class="source-name" :title="source.name">
                                    {{ source.name }}
                                </div>
                                <span class="source-status">{{ source.status }}</span>
                            </div>
                        </div>
                        <div class="upload-prompt mt-3">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <span>+ æ–°å¢çŸ¥è­˜ä¾†æºï¼ˆæ–‡ä»¶ã€FAQã€å“ç‰Œæ•…äº‹ï¼‰</span>
                        </div>
                    </div>
                </div>

                <!-- æƒ…å¢ƒæ¨¡æ“¬æŒ‰éˆ•çµ„ -->
                <div class="scenarios-section">
                    <h3 class="text-sm font-bold text-white mb-3 flex items-center gap-2">
                        <i class="fas fa-play-circle text-cyan-400"></i>
                        å¿«é€Ÿæ¼”ç¤ºæƒ…å¢ƒ
                    </h3>
                    <div class="scenarios-grid">
                        <button @click="runScenario('quick')" class="scenario-btn scenario-quick">
                            <i class="fas fa-bolt"></i>
                            <span class="scenario-label">é–ƒé›»å¿«é€Ÿ</span>
                            <span class="scenario-desc">5 æ­¥ (30ç§’)</span>
                        </button>
                        <button @click="runScenario('standard')" class="scenario-btn scenario-standard">
                            <i class="fas fa-user-circle"></i>
                            <span class="scenario-label">å®Œæ•´è«®è©¢</span>
                            <span class="scenario-desc">14 æ­¥ (å®Œæ•´æµç¨‹)</span>
                        </button>
                        <button @click="runScenario('premium')" class="scenario-btn scenario-premium">
                            <i class="fas fa-crown"></i>
                            <span class="scenario-label">å•†å‹™å°è³¼</span>
                            <span class="scenario-desc">14 æ­¥ + å ±åƒ¹</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Top Header -->
    <header class="p-3 sm:p-4 sm:px-8 flex flex-col sm:flex-row justify-between items-start sm:items-center border-b border-white/5 bg-slate-900/80 sticky top-0 z-40 gap-2">
        <div class="flex items-center space-x-3 w-full sm:w-auto">
            <div class="w-9 h-9 sm:w-10 sm:h-10 bg-[#00B900] rounded-xl flex items-center justify-center flex-shrink-0">
                <i class="fab fa-line text-xl sm:text-2xl text-white"></i>
            </div>
            <div class="min-w-0">
                <h2 class="text-sm sm:text-base font-black tracking-tighter">{{ config.shopName || 'AI å®¢æœåŠ©æ‰‹' }}</h2>
                <p class="text-[8px] sm:text-[9px] text-slate-500 font-bold uppercase tracking-widest">RAG é©…å‹• | å¤šæ¨¡æ…‹è­˜åˆ¥</p>
            </div>
        </div>
        <div class="hidden sm:flex items-center space-x-4">
            <div class="text-right mr-4">
                <p class="text-[9px] text-slate-500 font-bold">å°è©±è³ªé‡</p>
                <p class="text-xs font-bold text-green-400">{{ satisfactionScore }}% æ»¿æ„åº¦</p>
            </div>
            <button @click="resetFlow" class="px-4 py-2 bg-slate-800 rounded-lg text-xs font-bold hover:bg-slate-700 transition">é‡å•Ÿæ¼”ç·´</button>
        </div>
        <button @click="resetFlow" class="sm:hidden w-full px-3 py-2 bg-slate-800 rounded-lg text-xs font-bold hover:bg-slate-700 transition">é‡å•Ÿæ¼”ç·´</button>
    </header>

    <main class="flex-1 p-3 sm:p-6 flex flex-col lg:flex-row gap-3 sm:gap-8 items-start justify-center max-w-[1700px] mx-auto w-full">
        
        <!-- Left: Phone Simulator -->
        <div class="flex flex-col items-center space-y-3 sm:space-y-4 w-full lg:w-auto lg:shrink-0">
            <div class="w-full sm:w-auto">
                <div class="phone-mockup">
                    <div class="phone-inner">
                        <div class="line-header">
                            <i class="fas fa-chevron-left"></i>
                            <span class="flex-1 text-center px-2 truncate">æ™ºæ…§å®¶å±…å°ˆå®¶ - AI</span>
                            <div class="flex space-x-2 text-xs">
                                <i class="fas fa-search"></i>
                                <i class="fas fa-bars"></i>
                            </div>
                        </div>
                        
                        <div class="flex-1 overflow-y-auto p-3 space-y-3 no-scrollbar text-sm" id="chat-box">
                            <div v-for="(msg, i) in visibleMessages" :key="i" class="flex flex-col" :class="msg.role === 'user' ? 'items-end' : 'items-start'">
                                
                                <!-- User/Bot Text Message -->
                                <div v-if="!msg.isFlex && !msg.isImage" class="flex items-start max-w-[95%]" :class="msg.role === 'user' ? 'flex-row-reverse' : 'flex-row'">
                                    <div v-if="msg.role !== 'user'" class="w-6 h-6 sm:w-7 sm:h-7 rounded-full bg-[#00B900] mr-2 flex-shrink-0 flex items-center justify-center">
                                        <i v-if="msg.role === 'bot'" class="fas fa-robot text-white text-[9px]"></i>
                                        <img v-else src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix" class="rounded-full">
                                    </div>
                                    <div class="flex flex-col" :class="msg.role === 'user' ? 'items-end' : 'items-start'">
                                        <div :class="[msg.role === 'user' ? 'line-bubble-user' : 'line-bubble-bot']">
                                            <p class="text-[10px] sm:text-[11px] leading-snug break-words">{{ msg.text }}</p>
                                        </div>
                                        <span class="text-[7px] sm:text-[8px] text-slate-500 mt-1">17:05</span>
                                    </div>
                                </div>

                                <!-- Image Upload (Simulation) -->
                                <div v-if="msg.isImage" class="flex items-end flex-row-reverse max-w-[95%] animate-fade-in">
                                    <div class="rounded-xl overflow-hidden border-2 border-[#85e249] shadow-lg">
                                        <div class="w-28 h-28 sm:w-32 sm:h-32 bg-slate-200 flex flex-col items-center justify-center text-slate-400">
                                            <i class="fas fa-camera text-2xl mb-1"></i>
                                            <span class="text-[8px] sm:text-[9px] font-bold text-center px-1">ä¸Šå‚³ç…§ç‰‡ä¸­...</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Flex Message (Rich Text) -->
                                <div v-if="msg.isFlex" class="flex items-start max-w-[95%] flex-row animate-fade-in">
                                    <div class="w-6 h-6 sm:w-7 sm:h-7 rounded-full bg-[#00B900] mr-2 flex-shrink-0 flex items-center justify-center"><i class="fas fa-robot text-white text-[9px]"></i></div>
                                    <div class="flex-card">
                                        <div class="flex-header">{{ msg.flexTitle }}</div>
                                        <div v-if="msg.hasHero" class="flex-hero">
                                            <i class="fas fa-file-pdf text-4xl text-red-500"></i>
                                        </div>
                                        <div class="flex-body">
                                            <div v-for="row in msg.flexRows" class="flex-row">
                                                <span class="text-slate-400">{{ row.label }}</span>
                                                <span class="font-bold text-[#333]">{{ row.value }}</span>
                                            </div>
                                            <div class="flex-btn">{{ msg.flexBtn }}</div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <!-- Rich Menu -->
                        <div v-if="showMenu" class="rich-menu animate-fade-in">
                            <div class="menu-item"><i class="fas fa-box-open"></i><span>ç”¢å“ä»‹ç´¹</span></div>
                            <div class="menu-item"><i class="fas fa-camera-retro"></i><span>ç›¸å®¹æ€§è­˜åˆ¥</span></div>
                            <div class="menu-item"><i class="fas fa-book-reader"></i><span>æ‰‹å†Šä¸‹è¼‰</span></div>
                            <div class="menu-item"><i class="fas fa-user-shield"></i><span>æœƒå“¡ä¸­å¿ƒ</span></div>
                            <div class="menu-item"><i class="fas fa-question-circle"></i><span>æ’é™¤æ•…éšœ</span></div>
                            <div class="menu-item" style="background: #f0fff0;"><i class="fas fa-headset"></i><span>çœŸäººå°ˆå“¡</span></div>
                        </div>

                        <!-- Input Bar -->
                        <div class="bg-white p-3 sm:p-4 flex items-center gap-2 sm:gap-3 flex-shrink-0">
                            <button @click="showMenu = !showMenu" class="text-slate-400 flex-shrink-0 min-h-10 min-w-10 flex items-center justify-center"><i class="fas fa-th-large text-sm"></i></button>
                            <div class="flex-1 bg-slate-100 rounded-full py-2 px-3 text-[9px] sm:text-[10px] text-slate-400 italic flex items-center min-h-10">è¼¸å…¥è¨Šæ¯æˆ–ä¸Šå‚³åœ–ç‰‡...</div>
                            <button class="text-slate-400 flex-shrink-0 min-h-10 min-w-10 flex items-center justify-center"><i class="far fa-smile text-sm"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right: System Operations -->
        <div class="flex-1 flex flex-col space-y-4 sm:space-y-6 w-full">
            <!-- Execution Step -->
            <div class="premium-card p-4 sm:p-6 flex flex-col border-l-4 border-blue-500 gap-3 sm:gap-4">
                <div class="flex items-center justify-between flex-wrap gap-2">
                    <span class="text-[8px] sm:text-[10px] font-black text-slate-500 uppercase tracking-widest">Automated Workflow Execution</span>
                    <span class="text-xs font-black text-blue-500">Step {{ currentStep }} / 14</span>
                </div>
                <h3 class="text-base sm:text-lg font-bold text-white mb-2 italic break-words">ç›®æ¨™ï¼š{{ currentStepLabel }}</h3>
                <div class="flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:gap-3">
                    <button @click="prevStep" :disabled="currentStep === 1" class="w-full sm:w-10 h-10 rounded-xl bg-slate-800 flex items-center justify-center disabled:opacity-30 text-sm sm:text-base"><i class="fas fa-chevron-left"></i></button>
                    <div class="flex-1 p-3 bg-blue-500/10 border border-blue-500/30 rounded-xl min-h-12 flex items-center">
                        <p class="text-[9px] sm:text-xs text-blue-300 font-bold leading-relaxed break-words">{{ currentStepScript }}</p>
                    </div>
                    <button @click="nextStep" :disabled="currentStep === 14" class="w-full sm:w-auto h-10 px-4 sm:px-6 bg-blue-600 hover:bg-blue-500 text-white rounded-xl font-black text-xs shadow-lg shadow-blue-900/40 transition disabled:opacity-30">ä¸‹ä¸€éšæ®µ</button>
                </div>
            </div>

            <div class="flex-1 grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6">
                <!-- æµç¨‹é€²åº¦å’Œçµ±è¨ˆ -->
                <div class="premium-card flex flex-col overflow-hidden">
                    <div class="p-3 sm:p-4 border-b border-white/5 bg-white/5">
                        <span class="text-[9px] sm:text-[10px] font-black text-slate-400 uppercase">æµç¨‹é€²åº¦åˆ†æ</span>
                    </div>
                    <div class="flex-1 p-4 sm:p-5 space-y-4">
                        <!-- ä¸»é€²åº¦æ¢ -->
                        <div>
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-xs font-bold text-slate-300">æ•´é«”é€²åº¦</span>
                                <span class="text-sm font-bold text-blue-400">{{ Math.round((currentStep / 14) * 100) }}%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" :style="{ width: (currentStep / 14) * 100 + '%' }"></div>
                            </div>
                        </div>

                        <!-- çµ±è¨ˆå¡ç‰‡ç¶²æ ¼ -->
                        <div class="grid grid-cols-2 gap-3">
                            <div class="stat-card animate-slide-in">
                                <span class="stat-value">{{ currentStep }}</span>
                                <span class="stat-label">ç•¶å‰éšæ®µ</span>
                            </div>
                            <div class="stat-card animate-slide-in">
                                <span class="stat-value">{{ visibleMessages.length }}</span>
                                <span class="stat-label">å°è©±è¼ªæ•¸</span>
                            </div>
                            <div class="stat-card animate-slide-in">
                                <span class="stat-value">{{ conversationMetrics.questionCount }}</span>
                                <span class="stat-label">æå•æ¬¡æ•¸</span>
                            </div>
                            <div class="stat-card animate-slide-in">
                                <span class="stat-value">{{ conversationMetrics.videoFrames }}ms</span>
                                <span class="stat-label">å›æ‡‰å»¶é²</span>
                            </div>
                        </div>

                        <!-- æ­¥é©ŸæŒ‡ç¤ºå™¨ -->
                        <div>
                            <span class="text-xs font-bold text-slate-400 mb-2 block">æ­¥é©Ÿæ™‚é–“ç·š</span>
                            <div class="step-timeline">
                                <div v-for="i in 14" :key="i" 
                                     class="timeline-dot"
                                     :class="{ 
                                        'active': i === currentStep,
                                        'completed': i < currentStep
                                     }"
                                     @click="goToStep(i)"
                                     :title="`æ­¥é©Ÿ ${i}`">
                                </div>
                            </div>
                        </div>

                        <!-- å°è©±æ»¿æ„åº¦ -->
                        <div>
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-xs font-bold text-slate-300">é ä¼°æ»¿æ„åº¦</span>
                                <span class="text-sm font-bold text-green-400">{{ satisfactionScore }}%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" :style="{ width: satisfactionScore + '%', background: 'linear-gradient(90deg, #10b981, #34d399)' }"></div>
                            </div>
                            <span :class="['sentiment-badge', 'sentiment-' + sentimentType]">
                                {{ sentimentLabel }}
                            </span>
                        </div>
                    </div>
                </div>

                <!-- RAG Logic Detail -->
                <div class="premium-card flex flex-col overflow-hidden min-h-96">
                    <div class="p-3 sm:p-4 border-b border-white/5 bg-white/5 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2">
                        <span class="text-[9px] sm:text-[10px] font-black text-slate-400 uppercase">çŸ¥è­˜æª¢ç´¢å¼•æ“</span>
                        <div class="flex space-x-2">
                            <span class="text-[8px] sm:text-[9px] text-blue-500 font-bold whitespace-nowrap">å„ªåŒ–ç‹€æ…‹: ON</span>
                        </div>
                    </div>
                    <div class="flex-1 p-4 sm:p-5 overflow-y-auto no-scrollbar space-y-3 sm:space-y-4 relative">
                        <div v-if="isScanning" class="absolute inset-0 animate-scan z-10 pointer-events-none"></div>
                        
                        <div v-for="(chunk, idx) in visibleChunks" :key="idx" 
                             class="p-3 sm:p-4 rounded-xl border border-white/5 bg-slate-800/40 animate-fade-in animate-slide-in"
                             :style="{ 'animation-delay': idx * 100 + 'ms' }">
                            <div class="flex items-center justify-between mb-2 gap-2 flex-wrap">
                                <div class="flex items-center space-x-2">
                                    <i class="fas fa-database text-blue-500 text-[9px] sm:text-[10px]"></i>
                                    <span class="text-[8px] sm:text-[9px] font-black text-slate-500 uppercase">çŸ¥è­˜ç‰‡æ®µ #{{ idx+1 }}</span>
                                </div>
                                <span class="text-[7px] sm:text-[8px] bg-blue-500/20 text-blue-400 px-2 py-0.5 rounded whitespace-nowrap">ç›¸é—œæ€§: 0.{{ 98 - idx }}</span>
                            </div>
                            <p class="text-[10px] sm:text-[11px] text-slate-300 leading-relaxed italic break-words">"{{ chunk }}"</p>
                        </div>
                    </div>
                </div>

                <!-- Live Logs - æ”¹é€²ç‰ˆ -->
                <div class="premium-card flex flex-col overflow-hidden min-h-96 lg:col-span-2">
                    <div class="p-3 sm:p-4 border-b border-white/5 bg-white/5 flex items-center justify-between">
                        <span class="text-[9px] sm:text-[10px] font-black text-slate-400 uppercase">å®¢æˆ¶äº’å‹•æª”æ¡ˆ & å°è©±æ­·å²</span>
                        <span class="text-[8px] text-blue-400">{{ currentLogs.length }} å€‹äº’å‹•</span>
                    </div>
                    <div class="flex-1 p-4 sm:p-5 overflow-y-auto no-scrollbar">
                        <!-- å®¢æˆ¶åŸºæœ¬è³‡æ–™å¡ç‰‡ -->
                        <div class="customer-profile-card mb-4">
                            <div class="profile-header">
                                <div class="profile-icon">
                                    <i class="fas fa-user-circle"></i>
                                </div>
                                <div class="profile-info">
                                    <h4>{{ getCustomerProfile().name }}</h4>
                                    <p>{{ getCustomerProfile().type }}</p>
                                </div>
                            </div>
                            <div class="profile-stats">
                                <div class="stat-item">
                                    <span class="stat-title">å°è©±è¼ªæ•¸</span>
                                    <span class="stat-value">{{ visibleMessages.length }}</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-title">å’¨è©¢æ™‚é•·</span>
                                    <span class="stat-value">{{ conversationMetrics.videoFrames }}ms</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-title">æ»¿æ„åº¦</span>
                                    <span class="stat-value">{{ satisfactionScore }}%</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-title">æ¨è–¦ç”¢å“</span>
                                    <span class="stat-value">{{ getCustomerProfile().product }}</span>
                                </div>
                            </div>
                            <div class="profile-section">
                                <span class="section-title">ä¸»è¦éœ€æ±‚</span>
                                <p class="section-content">{{ getCustomerProfile().mainConcern }}</p>
                            </div>
                            <div class="profile-section">
                                <span class="section-title">å¾ŒçºŒå»ºè­°</span>
                                <p class="section-content">{{ getCustomerProfile().nextStep }}</p>
                            </div>
                        </div>

                        <!-- å°è©±æ­·å²æ™‚é–“ç·š -->
                        <div class="dialogue-history">
                            <h5 class="text-xs font-bold text-slate-400 mb-3 uppercase">å°è©±æ™‚é–“ç·š</h5>
                            <div class="timeline">
                                <div v-for="(log, idx) in currentLogs" :key="idx" class="timeline-item animate-slide-in"
                                     :style="{ 'animation-delay': idx * 50 + 'ms' }">
                                    <div class="timeline-marker" :class="log.type"></div>
                                    <div class="timeline-content">
                                        <div class="timeline-title">{{ log.title }}</div>
                                        <div class="timeline-desc">{{ log.desc }}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>

<script>
// Fix mobile 100vh so chat area scales with the visible viewport
const setMobileVh = () => {
    const vh = window.innerHeight * 0.01;
    document.documentElement.style.setProperty('--vh', `${vh}px`);
};
setMobileVh();
window.addEventListener('resize', setMobileVh);

const { createApp, ref, computed, nextTick } = Vue;

createApp({
    setup() {
        // ========== åƒæ•¸é…ç½® ==========
        const config = ref({
            shopName: 'å„ªé¸å®¶å±…å®˜æ–¹å°ˆè³£',
            mainProduct: 'smart-home',
            targetAudience: 'mixed',
            brandStory: 'å …æŒå°ç£è£½é€ ã€ç’°ä¿å‹å–„'
        });

        const showConfigTip = ref(true);

        const knowledgeSources = ref([
            { name: '2025 å¹´åº¦ç”¢å“ç›®éŒ„ & æŠ€è¡“è¦æ ¼æ›¸', type: 'catalog', status: 'âœ“ å·²åŒæ­¥' },
            { name: 'FAQ å¸¸è¦‹å•é¡Œè§£ç­”ï¼ˆå«é€€è²¨æ”¿ç­–ï¼‰', type: 'faq', status: 'âœ“ å·²åŒæ­¥' },
            { name: 'å“ç‰Œæ•…äº‹èˆ‡ä¼æ¥­ç¤¾æœƒè²¬ä»»æ‰¿è«¾', type: 'story', status: 'âœ“ å·²åŒæ­¥' },
            { name: 'å®¢æˆ¶è©•è«–èˆ‡æˆåŠŸæ¡ˆä¾‹é›†éŒ¦', type: 'reviews', status: 'âœ“ å·²åŒæ­¥' },
            { name: 'å®‰è£æ•™å­¸å½±ç‰‡ & æ’é™¤æ•…éšœæŒ‡å—', type: 'guide', status: 'âœ“ å·²åŒæ­¥' }
        ]);

        const getSourceIcon = (type) => {
            const icons = {
                'catalog': 'fas fa-book',
                'faq': 'fas fa-question-circle',
                'story': 'fas fa-heart',
                'reviews': 'fas fa-star',
                'guide': 'fas fa-video'
            };
            return icons[type] || 'fas fa-file';
        };

        const onConfigChange = () => {
            // é‡æ–°ç”Ÿæˆæµç¨‹å…§å®¹ï¼ˆåŸºæ–¼æ–°é…ç½®ï¼‰
            regenerateFlow();
        };

        // ========== ç‹€æ…‹ç®¡ç† ==========
        const currentStep = ref(1);
        const isScanning = ref(false);
        const showMenu = ref(true);

        // ========== åŸºç¤æµç¨‹æ¨¡æ¿ ==========
        const flowTemplate = {
            'smart-home': [
                { step: 1, label: 'å“ç‰Œå•å€™', role: 'bot', text: 'æ­¡è¿ä¾†åˆ°å„ªé¸å®¶å±…ï¼æˆ‘æ˜¯æ™ºèƒ½å®¢æœ AIï¼Œå¹«æ‚¨æ¨è–¦æœ€åˆé©çš„æ™ºèƒ½å®¶å±…è§£æ±ºæ–¹æ¡ˆã€‚', script: 'å±•ç¤ºå“ç‰ŒèªåŒå’Œæœå‹™æ‰¿è«¾ï¼ŒAI é€²å…¥ã€Œç²¾æº–æ¨è–¦ã€æ¨¡å¼ã€‚' },
                { step: 2, label: 'ç”¢å“åˆ†é¡å°è¦½', role: 'bot', text: 'æˆ‘å€‘æœ‰ 5 å¤§ç”¢å“ç·šï¼šæ™ºèƒ½é–‹é—œã€æ„Ÿæ¸¬å™¨ã€æ§åˆ¶å™¨ã€æ©‹æ¥å™¨å’Œå°ˆæ¥­æ‡‰ç”¨æ–¹æ¡ˆã€‚æ‚¨å°å“ªå€‹é¡åˆ¥æ„Ÿèˆˆè¶£ï¼Ÿ', script: 'RAG æª¢ç´¢ç”¢å“ç›®éŒ„ï¼Œå±•ç¤ºåˆ†é¡å’Œç‰¹è‰²ã€‚' },
                { step: 3, label: 'å®¢æˆ¶è©¢å•', role: 'user', text: 'æˆ‘æƒ³è£æ™ºèƒ½é–‹é—œï¼Œä½†æ€•è£ä¸å¥½ã€‚è«‹å•å®‰è£éº»ç…©å—ï¼Ÿ', script: 'å®¢æˆ¶æå‡ºå®‰è£ç›¸é—œç–‘æ…®ã€‚' },
                { step: 4, label: 'FAQ å›ç­”', role: 'bot', text: 'å®Œå…¨ä¸éº»ç…©ï¼æˆ‘å€‘ SmartHub ç³»åˆ—æœ‰ä¸‰ç¨®å®‰è£æ–¹å¼ï¼š(1)å…é›»æ± ç„¡ç·šç‰ˆï¼ˆæ¨è–¦ï¼‰ (2)æœ‰ç·šç‰ˆï¼ˆéœ€ä¸­æ€§ç·šï¼‰ (3)æ”¹é€ ç‰ˆï¼ˆèˆŠé–‹é—œç›´æ¥æ›¿æ›ï¼‰ã€‚æˆ‘å¯ä»¥å¹«æ‚¨åˆ¤æ–·å®¶è£¡é©åˆå“ªä¸€ç¨®ã€‚', script: 'å¼•ç”¨ FAQ çŸ¥è­˜åº«ï¼Œæä¾›å¤šå€‹è§£æ±ºæ–¹æ¡ˆã€‚' },
                { step: 5, label: 'åœ–ç‰‡è­˜åˆ¥è«‹æ±‚', role: 'bot', text: 'èƒ½æ‹ä¸€å¼µæ‚¨å®¶çš„é–‹é—œç›’å…§éƒ¨å—ï¼Ÿæˆ‘ç”¨ AI è¦–è¦ºè­˜åˆ¥å¹«æ‚¨åˆ¤æ–·æ˜¯å¦æœ‰ä¸­æ€§ç·šã€‚', script: 'Vision æ¨¡çµ„é ç†±ï¼Œè¦æ±‚ç‰¹å®šåœ–åƒã€‚' },
                { step: 6, label: 'ç”¨æˆ¶ä¸Šå‚³', role: 'user', isImage: true, script: 'ç”¨æˆ¶ä¸Šå‚³é–‹é—œç›’ç…§ç‰‡ï¼Œç³»çµ±å•Ÿå‹•å¤šæ¨¡æ…‹è­˜åˆ¥ã€‚' },
                { step: 7, label: 'è¦–è¦ºè­˜åˆ¥çµæœ', role: 'bot', text: 'âœ“ è­˜åˆ¥å®Œæˆï¼æ‚¨çš„åº•ç›’æœ‰ä¸­æ€§ç·šï¼ˆé›¶ç·šï¼‰ï¼Œæœ€é©åˆè£æˆ‘å€‘çš„ã€SmartHub Pro æœ‰ç·šç‰ˆã€ã€‚é€™æ¬¾ç²å¾— 2024 å¹´ã€Œå°ç£æ™ºæ…§å®¶å±…å‰µæ–°çã€ï¼Œç”¨æˆ¶å¥½è©•ç‡ 98%ã€‚', script: 'Vision AI è­˜åˆ¥ä¸­æ€§ç·šï¼Œå¼•ç”¨å“ç‰Œèªè­‰å’Œè©•è«–ã€‚' },
                { step: 8, label: 'ç”¢å“è©³ç´°å¡ç‰‡', role: 'bot', isFlex: true, 
                  flexTitle: 'æ¨è–¦ç”¢å“ï¼šSmartHub Pro æœ‰ç·šç‰ˆ',
                  flexRows: [
                      { label: 'é©é…æ€§', value: '99% å®¶åº­ç›¸å®¹' },
                      { label: 'å®‰è£æ™‚é–“', value: '30 åˆ†é˜ï¼ˆå«æ•™å­¸ï¼‰' },
                      { label: 'ä¿å›ºå¹´æ•¸', value: '5 å¹´æ¥­ç•Œä¿è­‰' },
                      { label: 'ç‰¹è‰²', value: 'é‚Šç·£é‹ç®— + é›¢ç·šå¯ç”¨' }
                  ],
                  flexBtn: 'æŸ¥çœ‹å®Œæ•´è¦æ ¼', script: 'æ¨é€ç”¢å“è©³æƒ…å¡ç‰‡ï¼Œçªå‡ºæŠ€è¡“å„ªå‹¢å’Œä¿éšœã€‚' },
                { step: 9, label: 'å“ç‰Œæ‰¿è«¾å±•ç¤º', role: 'bot', text: 'æˆ‘å€‘æ˜¯ MIT èªè­‰å“ç‰Œï¼Œæ‰€æœ‰ç”¢å“éƒ½åœ¨å°ç£è¨­è¨ˆè£½é€ ã€‚ä¸¦æ‰¿è«¾ï¼šçµ‚èº«å…è²»æŠ€è¡“æ”¯æ´ã€90 å¤©ç„¡æ¢ä»¶é€€è²¨ã€ç”¨æˆ¶éš±ç§ç¬¬ä¸€ã€‚', script: 'å±•ç¤ºå“ç‰Œæ•…äº‹å’Œä¼æ¥­ç¤¾æœƒè²¬ä»»ã€‚' },
                { step: 10, label: 'æ·±åº¦ FAQ', role: 'user', text: 'è½èµ·ä¾†ä¸éŒ¯ï¼ä½†å¦‚æœæ–·ç¶²å‘¢ï¼Ÿè€Œä¸”å‡ç´šå›ºä»¶å®‰å…¨å—ï¼Ÿ', script: 'å®¢æˆ¶æå‡ºé€²éšæŠ€è¡“å•é¡Œã€‚' },
                { step: 11, label: 'é€²éšæŠ€è¡“è§£ç­”', role: 'bot', text: 'å¾ˆå¥½çš„å•é¡Œï¼(1) æ–·ç¶²æ™‚ï¼šè¨­å‚™æœ‰é‚Šç·£é‹ç®—å¼•æ“ï¼Œæœ¬åœ°å ´æ™¯å’Œè‡ªå‹•åŒ–å®Œå…¨æ­£å¸¸ (2) å®‰å…¨æ€§ï¼šæˆ‘å€‘ç”¨è»äº‹ç´šåŠ å¯†ï¼Œå›ºä»¶æ›´æ–°åªåœ¨ WiFi ç’°å¢ƒé€²è¡Œï¼Œæ›´æ–°å‰æœƒé©—è­‰æ•¸ä½ç°½åã€‚è©³ç´°æŠ€è¡“ç™½çš®æ›¸å·²æ”¾åœ¨ FAQã€‚', script: 'AI æå–æŠ€è¡“æ–‡æª”ï¼Œé€²è¡Œæ·±åº¦å°ˆæ¥­å›ç­”ã€‚' },
                { step: 12, label: 'å®¢æˆ¶æˆåŠŸæ¡ˆä¾‹', role: 'bot', isFlex: true,
                  flexTitle: 'âœ“ å®¢æˆ¶æˆåŠŸæ¡ˆä¾‹',
                  flexRows: [
                      { label: 'å°å—å¼µå®¶', value: '100 åªè±ªå®…' },
                      { label: 'æ”¹é€ æ™‚é–“', value: '2 å¤©å®Œæˆ' },
                      { label: 'æ»¿æ„åº¦', value: 'â­â­â­â­â­ 5æ˜Ÿ' }
                  ],
                  flexBtn: 'çœ‹æ›´å¤šæ¡ˆä¾‹', script: 'æ¨é€å®¢æˆ¶è©•è«–å’ŒæˆåŠŸæ¡ˆä¾‹ã€‚' },
                { step: 13, label: 'è³¼è²·æ„é¡˜å‡æº«', role: 'user', text: 'å¥½å§ï¼Œæˆ‘æ±ºå®šè©¦è©¦ã€‚è«‹å•æœ‰æ•™å­¸å½±ç‰‡å—ï¼Ÿè£ä¸å¥½æ€éº¼è¾¦ï¼Ÿ', script: 'å®¢æˆ¶å‚¾å‘è³¼è²·ï¼Œä½†å°‹æ±‚é¡å¤–ä¿éšœã€‚' },
                { step: 14, label: 'è³¼å‰è²¼å¿ƒæ”¯æ´', role: 'bot', text: 'ç•¶ç„¶æœ‰ï¼æˆ‘å€‘æœ‰ 1 å°æ™‚å®Œæ•´è£æ©Ÿå½±ç‰‡ã€24 å°æ™‚ç·šä¸Šå®¢æœã€ç”šè‡³å¯ä»¥ä»˜è²»è«‹æˆ‘å€‘æ´¾å¸«å‚…åˆ°åºœå®‰è£ã€‚è³¼è²·å¾Œæˆ‘æœƒç™¼é€å°ˆå±¬å®‰è£æŒ‡å—å’Œå”®å¾Œ QR codeï¼Œä»»ä½•å•é¡Œç§’å›è¦†ã€‚', script: 'å±•ç¾å®Œæ•´çš„è³¼å‰è³¼å¾Œæ”¯æ´æ‰¿è«¾ã€‚' }
            ],
            'fashion': [
                { step: 1, label: 'å“ç‰Œæ­¡è¿', role: 'bot', text: 'æ­¡è¿ä¾†åˆ°å„ªé¸æœé£¾ï¼æˆ‘æ˜¯æ‚¨çš„æ™‚å°šé¡§å• AIï¼Œå¹«æ‚¨æ‰¾åˆ°å®Œç¾æ­é…ã€‚', script: 'å“ç‰Œå•å€™ï¼Œå±•ç¤ºæœå‹™é¢¨æ ¼ã€‚' },
                { step: 2, label: 'é¢¨æ ¼è«®è©¢', role: 'bot', text: 'æˆ‘å€‘æœ‰ OL ä¸Šç­æ—ã€ä¼‘é–’é‹å‹•ã€æ­£å¼å…¸ç¦®ä¸‰å¤§é¢¨æ ¼ç³»åˆ—ã€‚æ‚¨ä»Šå¤©æƒ³æ‰¾ä»€éº¼é¢¨æ ¼çš„è¡£è‘—ï¼Ÿ', script: 'RAG æª¢ç´¢é¢¨æ ¼åˆ†é¡å’Œç•¶å­£æµè¡Œã€‚' },
                { step: 3, label: 'å®¢æˆ¶éœ€æ±‚', role: 'user', text: 'æˆ‘æƒ³è¦æ—¢èˆ’é©åˆé¡¯æ°£è³ªçš„ä¸Šç­æœï¼Œé©åˆ 30+ çš„ä¸Šç­æ—ã€‚', script: 'å®¢æˆ¶æ˜ç¢ºè¡¨é”éœ€æ±‚å’Œå¹´é½¡å±¤ã€‚' },
                { step: 4, label: 'ç”¢å“æ¨è–¦', role: 'bot', text: 'å®Œç¾ï¼æˆ‘å€‘æœ‰ã€Œç†Ÿå¥³æ°£è³ªç³»åˆ—ã€ï¼Œç”¨å¤©çµ²å’Œæ£‰æ··ç´¡ï¼ŒæŸ”è»Ÿé€æ°£ï¼Œå‰ªè£é¡¯èº«æã€‚ä»Šå¹´å¾ˆç´…çš„æ¬¾å¼ã€‚', script: 'å¼•ç”¨ç”¢å“ç›®éŒ„æ¨è–¦åˆé©æ¬¾å¼ã€‚' },
                { step: 5, label: 'åœ–ç‰‡æœç´¢', role: 'bot', text: 'ä½ èƒ½æ‹ä¸€ä¸‹ä½ ç¾åœ¨ç©¿çš„è¡£æœå—ï¼Ÿæˆ‘ç”¨ AI è‰²å½©åˆ†æå¹«ä½ æ¨è–¦æ­é…ã€‚', script: 'Vision æ¨¡çµ„å•Ÿå‹•è‰²å½©åˆ†æã€‚' },
                { step: 6, label: 'ç”¨æˆ¶ä¸Šå‚³', role: 'user', isImage: true, script: 'å®¢æˆ¶ä¸Šå‚³ç©¿è¡£ç…§ç‰‡ã€‚' },
                { step: 7, label: 'AI è‰²å½©åˆ†æ', role: 'bot', text: 'âœ“ åˆ†æå®Œæˆï¼ä½ æ˜¯å†¬å­£è‰²ç³»ï¼ˆå†·è‰²èª¿ï¼‰ï¼Œå¾ˆé©åˆæˆ‘å€‘çš„æ·±è—ã€ç‚­é»‘å’ŒéŠ€ç°è‰²ã€‚é¿å…æš–è¤è‰²æœƒæ›´é¡¯æ°£è³ªã€‚', script: 'Vision é€²è¡Œè‰²å½©å’Œè†šè‰²åˆ†æã€‚' },
                { step: 8, label: 'æ­é…å»ºè­°å¡ç‰‡', role: 'bot', isFlex: true, 
                  flexTitle: 'ç‚ºä½ æ¨è–¦çš„æ­é…çµ„åˆ',
                  flexRows: [
                      { label: 'ä¸Šè¡£', value: 'æ·±è—ç·¹èŠ±è¥¯è¡«' },
                      { label: 'è¤²å­', value: 'é»‘è‰²ç›´ç­’è¤²' },
                      { label: 'é…ä»¶', value: 'éŠ€è‰²æ‰‹éŒ¶' },
                      { label: 'æ•´å¥—å„ªæƒ ', value: '9 æŠ˜å¥—è£åƒ¹' }
                  ],
                  flexBtn: 'åŠ å…¥è³¼ç‰©è»Š', script: 'æ¨é€æ­é…å»ºè­°å¡ç‰‡ã€‚' },
                { step: 9, label: 'å“ç‰Œæ•…äº‹', role: 'bot', text: 'æˆ‘å€‘æ˜¯å°ç£è‡ªå‰µå“ç‰Œï¼Œå …æŒç”¨æ°¸çºŒé¢æ–™ï¼ˆå›æ”¶å¯¶ç‰¹ç“¶è£½æˆï¼‰ï¼ŒåŒæ™‚æ”¯æŒå…¬å¹³è²¿æ˜“ã€‚æ¯è²·ä¸€ä»¶è¡£æœï¼Œæˆ‘å€‘å°±æ 10 å…ƒçµ¦å©¦å¥³æ•™è‚²åŸºé‡‘ã€‚', script: 'å±•ç¤ºå“ç‰Œç¤¾æœƒè²¬ä»»ã€‚' },
                { step: 10, label: 'é€²éš FAQ', role: 'user', text: 'å“è³ªæ€éº¼æ¨£ï¼Ÿæœƒä¸æœƒå®¹æ˜“èµ·æ¯›çƒæˆ–è¤ªè‰²ï¼Ÿ', script: 'å®¢æˆ¶è©¢å•å“è³ªå’Œè€ç”¨æ€§ã€‚' },
                { step: 11, label: 'å“è³ªä¿è­‰', role: 'bot', text: 'æˆ‘å€‘æ¯ä»¶è¡£æœéƒ½ç¶“é 200 æ¬¡æ´—æ»Œæ¸¬è©¦ï¼Œèµ·æ¯›çƒç‡ < 1%ï¼Œè‰²ç‰¢åº¦ 4 ç´šä»¥ä¸Šï¼ˆè¡Œæ¥­æœ€é«˜æ¨™æº–ï¼‰ã€‚é‚„æœ‰ 1 å¹´å“è³ªä¿è­‰ï¼Œèµ·æ¯›æˆ–è¤ªè‰²å…è²»æ›æ–°ã€‚', script: 'AI å¼•ç”¨å“è³ªæ¸¬è©¦æ•¸æ“šå’Œä¿éšœã€‚' },
                { step: 12, label: 'å®¢æˆ¶è©•è«–', role: 'bot', isFlex: true,
                  flexTitle: 'â­ å®¢æˆ¶ç©¿æ­åˆ†äº«',
                  flexRows: [
                      { label: 'ç¾å€©ï¼ˆ32æ­²ä¸Šç­æ—ï¼‰', value: 'ç©¿ä¸€æ•´å¹´éƒ½èˆ’æœ' },
                      { label: 'ç”¨æˆ¶è©•åˆ†', value: 'â­â­â­â­â­ 9.8/10' },
                      { label: 'å›è³¼ç‡', value: '68% å®¢æˆ¶é‡è¤‡è³¼è²·' }
                  ],
                  flexBtn: 'çœ‹æ›´å¤šè©•è«–', script: 'æ¨é€å®¢æˆ¶ç©¿æ­å’Œè©•åƒ¹ã€‚' },
                { step: 13, label: 'è³¼è²·ç¢ºèª', role: 'user', text: 'æ±ºå®šäº†ï¼Œæˆ‘è¦è²·é‚£çµ„æ­é…ï¼è«‹å•æœ‰ 7 å¤©è©¦ç©¿å—ï¼Ÿ', script: 'å®¢æˆ¶æº–å‚™è³¼è²·ï¼Œè©¢å•é€€è²¨æ”¿ç­–ã€‚' },
                { step: 14, label: 'è³¼è²·ä¿éšœ', role: 'bot', text: 'ç•¶ç„¶æœ‰ï¼æˆ‘å€‘æä¾› 7 å¤©ç„¡æ¢ä»¶è©¦ç©¿é€€è²¨ã€‚è€Œä¸”æ–°å®¢æˆ¶é¦–æ¬¡è³¼è²·æ‰“ 85 æŠ˜ã€‚ä»Šå¤©ä¸‹å–®é‚„é€åƒ¹å€¼ 200 å…ƒçš„ä¿é¤Šçµ„åˆã€‚æˆ‘ç™¼é€çµ¦ä½ å°ˆå±¬è³¼ç‰©é€£çµï¼ŒæŸ¥çœ‹ä½ çš„å€‹äººåŒ–ç©¿æ­å»ºè­°ï¼', script: 'å±•ç¤ºå®Œæ•´çš„è³¼è²·ä¿éšœå’Œæ–°å®¢å„ªæƒ ã€‚' }
            ]
        };

        // ç•¶å‰æµç¨‹
        let flow = flowTemplate['smart-home'];

        const regenerateFlow = () => {
            const product = config.value.mainProduct;
            flow = flowTemplate[product] || flowTemplate['smart-home'];
            currentStep.value = 1;
            showMenu.value = true;
        };

        // ========== çŸ¥è­˜åº« ==========
        const knowledgeChunks = computed(() => {
            const product = config.value.mainProduct;
            const chunks = {
                'smart-home': [
                    "ç”¢å“ç‰¹è‰²ï¼šIoT æ™¶ç‰‡æ¡ç”¨æ¥­ç•Œæœ€æ–° Zigbee 3.0 æ¨™æº–ï¼Œæ”¯æ´é›¢ç·šé‚Šç·£é‹ç®—ï¼Œä¸ä¾è³´é›²ç«¯ã€‚",
                    "å®‰è£ä¸‰é¸é …ï¼š(1) ç„¡ç·šé›»æ± ç‰ˆï¼ˆæœ€ç°¡å–®ï¼Œç„¡éœ€æ”¹ç·šï¼‰ (2) æœ‰ç·šç‰ˆï¼ˆéœ€ä¸­æ€§ç·šï¼Œæ•ˆèƒ½æœ€ä½³ï¼‰ (3) æ”¹é€ ç‰ˆï¼ˆèˆŠé–‹é—œç›´æ¥æ›¿æ›ï¼‰ã€‚",
                    "å“ç‰Œèªè­‰ï¼š2024 å¹´å°ç£æ™ºæ…§å®¶å±…å‰µæ–°çã€SGS é©—è­‰ã€5 å¹´æ¥­ç•Œæœ€é•·ä¿å›ºæœŸã€‚",
                    "å®¢æˆ¶æˆåŠŸæ¡ˆä¾‹ï¼šå°å—å¼µå®¶ 100 åªè±ªå®…ã€å°ä¸­é™³å…ˆç”Ÿè¾¦å…¬å®¤ã€é«˜é›„æå¥³å£«æ°‘å®¿ï¼Œæ»¿æ„åº¦å‡ 98% ä»¥ä¸Šã€‚"
                ],
                'fashion': [
                    "é¢æ–™æŠ€è¡“ï¼šå¤©çµ²èˆ‡æœ‰æ©Ÿæ£‰æ··ç´¡ï¼Œé€æ°£èˆ’é©ï¼Œå›æ”¶å¯¶ç‰¹ç“¶è£½æˆï¼ˆæ°¸çºŒæ™‚å°šï¼‰ã€‚",
                    "è‰²ç³»åˆ†æï¼šæ˜¥å¤è‰²ç³»ï¼ˆæš–è‰²èª¿ï¼‰ã€ç§‹å†¬è‰²ç³»ï¼ˆå†·è‰²èª¿ï¼‰ï¼ŒAI æœƒæ ¹æ“šè†šè‰²æ¨è–¦æœ€é¡¯æ°£è³ªæ¬¾å¼ã€‚",
                    "å“è³ªä¿è­‰ï¼šç¶“é 200 æ¬¡æ´—æ»Œæ¸¬è©¦ï¼Œèµ·æ¯›çƒç‡ < 1%ï¼Œè‰²ç‰¢åº¦ 4 ç´šï¼Œ1 å¹´å“è³ªä¿éšœã€‚",
                    "ç¤¾æœƒè²¬ä»»ï¼šæ¯ä»¶è¡£æœå”®åƒ¹ä¸­ 10 å…ƒæè´ˆçµ¦å©¦å¥³æ•™è‚²åŸºé‡‘ï¼Œæ”¯æŒå°ç£è¨­è¨ˆå¸«è‡ªå‰µå“ç‰Œè¨ˆç•«ã€‚"
                ],
                'beauty': [
                    "æˆåˆ†é¸æ“‡ï¼š95% å¤©ç„¶æ¤ç‰©èƒå–ï¼Œç„¡é¡å›ºé†‡ã€ç„¡é‡é‡‘å±¬ï¼Œé€šéçš®è†šç§‘é†«ç”Ÿæ¸¬è©¦ã€‚",
                    "æ•ˆæœæ‰¿è«¾ï¼š30 å¤©è¦‹æ•ˆæˆ– 100% é€€æ¬¾ï¼Œ3 å€‹æœˆæ˜é¡¯æ”¹å–„æˆ–å…è²»è£œå……ã€‚",
                    "ç”¨æˆ¶è©•åƒ¹ï¼š92% ç”¨æˆ¶æ»¿æ„åº¦ï¼Œå¹³å‡ 4.8 æ˜Ÿï¼Œå›è³¼ç‡ 75%ã€‚",
                    "å”®å¾Œæœå‹™ï¼šæä¾›å…è²»è†šè³ªåˆ†æã€å±…å®¶ä¿é¤Šèª²ç¨‹ã€24 å°æ™‚ç·šä¸Šè«®è©¢ã€‚"
                ],
                'food': [
                    "é£Ÿæä¾†æºï¼š100% å°ç£æœ¬åœ°å°è¾²ï¼Œå¯æº¯æºèªè­‰ï¼Œä¸ä½¿ç”¨è¾²è—¥åŒ–è‚¥ã€‚",
                    "è£½ç¨‹é€æ˜ï¼šæ¯æ‰¹ç”¢å“æƒ QR code å¯æŸ¥çœ‹è£½é€ æ—¥æœŸã€æˆåˆ†ä¾†æºã€æª¢é©—å ±å‘Šã€‚",
                    "å¥åº·èªè­‰ï¼šé€šé BSMI èªè­‰ã€å°ç£ FDA åˆæ ¼ã€ç‡Ÿé¤Šå¸«æ¨è–¦å“ç‰Œã€‚",
                    "é…é€ä¿é®®ï¼šå†·éˆé…é€ã€24 å°æ™‚å…§é€é”ï¼Œä¸æ–°é®®å…è²»è£œé€æˆ–å…¨é¡é€€æ¬¾ã€‚"
                ],
                'electronics': [
                    "æŠ€è¡“è¦æ ¼ï¼šæ­è¼‰æœ€æ–° A17 Pro æ™¶ç‰‡ã€IP68 é˜²æ°´èªè­‰ã€æ”¯æ´ 5 å¹´ç³»çµ±æ›´æ–°ã€‚",
                    "åƒ¹æ ¼ä¿è­‰ï¼š24 å°æ™‚å…§æœ‰æ›´ä¾¿å®œä¾†æºï¼Œæˆ‘å€‘è‡ªå‹•é™åƒ¹æˆ–è£œå·®åƒ¹ã€‚",
                    "å”®å¾Œä¿éšœï¼š2 å¹´å…¨ä¿®å…¨æ›ä¿éšœã€1 å¹´æ„å¤–æå‚·å…è²»ä¿®ã€å®˜æ–¹èªè­‰ç¶­ä¿®é»éä½ˆå…¨å°ã€‚",
                    "å®¢æˆ¶è©•è«–ï¼šç§‘æŠ€éƒ¨è½å®¢æ¨è–¦ã€é›»ç«¶é¸æ‰‹ä»£è¨€ã€ä¸Šå¸‚å…¬å¸å“¡å·¥èªå¯ã€‚"
                ],
                'home-decor': [
                    "è¨­è¨ˆé¢¨æ ¼ï¼šåŒ—æ­ç°¡ç´„ã€æ—¥å¼ä¾˜å¯‚ã€å·¥æ¥­é¢¨ã€æ–°å¤å…¸ç­‰ 8 ç¨®é¢¨æ ¼ä»»é¸ã€‚",
                    "å®¢è£½åŒ–æœå‹™ï¼šå¯æä¾›å…è²» 3D å±…å®¶ç©ºé–“è¨­è¨ˆã€ç·šä¸Šè«®è©¢ã€ä¸Šé–€ä¸ˆé‡ã€‚",
                    "æè³ªå“è³ªï¼šé¸ç”¨ FSC èªè­‰æœ¨æã€é€²å£å¸ƒæ–™ã€ä½ç”²é†›ç’°ä¿æ²¹æ¼†ã€‚",
                    "å®‰è£æœå‹™ï¼šæä¾›å…è²»é€è£ã€èˆŠå‚¢ä¿±å›æ”¶ã€6 å€‹æœˆå…§æå‚·å…è²»ä¿®å¾©ã€‚"
                ]
            };
            return chunks[product] || chunks['smart-home'];
        });

        // ========== è¨ˆç®—å±¬æ€§ ==========
        const visibleMessages = computed(() => flow.filter(f => f.step <= currentStep.value));
        const currentStepLabel = computed(() => flow[currentStep.value-1]?.label);
        const currentStepScript = computed(() => flow[currentStep.value-1]?.script);
        const visibleChunks = computed(() => knowledgeChunks.value.filter((_, i) => i < Math.ceil(currentStep.value / 3)));
        
        const currentLogs = computed(() => {
            const l = [];
            const steps = flow.slice(0, currentStep.value).reverse();
            steps.forEach(s => {
                const iconMap = {
                    'action': 'âœ“',
                    'vision': 'ğŸ‘ï¸',
                    'system': 'âš™ï¸'
                };
                const type = s.role === 'human' ? 'action' : s.isImage ? 'vision' : 'system';
                l.push({ 
                    title: s.label, 
                    desc: s.script, 
                    type: type,
                    icon: iconMap[type]
                });
            });
            return l;
        });

        // ========== å°è©±æŒ‡æ¨™ ==========
        const conversationMetrics = computed(() => ({
            questionCount: Math.ceil(visibleMessages.value.filter(m => m.role === 'user').length),
            videoFrames: 150 + currentStep.value * 10
        }));

        const satisfactionScore = computed(() => {
            let score = 60 + currentStep.value * 3;
            if (currentStep.value > 10) score += 10;
            return Math.min(score, 98);
        });

        const sentimentType = computed(() => {
            if (satisfactionScore.value > 80) return 'positive';
            if (satisfactionScore.value > 50) return 'neutral';
            return 'negative';
        });

        const sentimentLabel = computed(() => {
            if (sentimentType.value === 'positive') return 'âœ“ éå¸¸æ»¿æ„';
            if (sentimentType.value === 'neutral') return 'â— ä¸­ç«‹';
            return 'âœ— éœ€æ”¹é€²';
        });

        // ========== æ“ä½œæ–¹æ³• ==========
        const nextStep = () => {
            if (currentStep.value < flow.length) {
                isScanning.value = true;
                setTimeout(() => {
                    currentStep.value++;
                    isScanning.value = false;
                    scrollToBottom();
                }, 500);
            }
        };

        const prevStep = () => { 
            if (currentStep.value > 1) {
                currentStep.value--;
                scrollToBottom();
            }
        };

        const goToStep = (step) => {
            currentStep.value = step;
            scrollToBottom();
        };

        const runScenario = (scenario) => {
            currentStep.value = 1;
            showMenu.value = true;
            
            if (scenario === 'quick') {
                // å¿«é€Ÿæ¼”ç¤ºï¼šè·‘åˆ°ç¬¬ 5 æ­¥
                setTimeout(() => {
                    currentStep.value = 5;
                    scrollToBottom();
                }, 1000);
            } else if (scenario === 'standard') {
                // å®Œæ•´è«®è©¢ï¼šè·‘åˆ°ç¬¬ 14 æ­¥
                let step = 1;
                const interval = setInterval(() => {
                    step++;
                    currentStep.value = step;
                    if (step >= 14) {
                        clearInterval(interval);
                        scrollToBottom();
                    }
                }, 300);
            } else if (scenario === 'premium') {
                // å•†å‹™å°è³¼ï¼šè·‘å®Œå…¨æµç¨‹
                let step = 1;
                const interval = setInterval(() => {
                    step++;
                    currentStep.value = step;
                    if (step >= 14) {
                        clearInterval(interval);
                        scrollToBottom();
                    }
                }, 250);
            }
        };

        const resetFlow = () => { 
            currentStep.value = 1; 
            showMenu.value = true;
            scrollToBottom();
        };

        const scrollToBottom = () => {
            nextTick(() => {
                const box = document.getElementById('chat-box');
                if (box) box.scrollTo({ top: box.scrollHeight, behavior: 'smooth' });
            });
        };

        // ========== å®¢æˆ¶è³‡æ–™æ–¹æ³• ==========
        const customerProfiles = {
            'smart-home': {
                name: 'ç‹å°å§',
                type: 'ä½å®…ç”¨æˆ¶ | é¦–æ¬¡è«®è©¢',
                product: 'SmartHub Pro æœ‰ç·šç‰ˆ',
                mainConcern: 'å°‹æ±‚å®‰å…¨å¯é çš„æ™ºèƒ½å®¶å±…ç³»çµ±ï¼Œå¸Œæœ›æ”¯æ´é›¢ç·šé‹ä½œ',
                nextStep: 'å»ºè­°é€²è¡Œ 1 å° 1 å±…å®¶å‹˜æŸ¥ï¼Œè©•ä¼°å®‰è£æ–¹æ¡ˆï¼Œ7 å¤©å…§ç°½ç´„äº« 9 æŠ˜å„ªæƒ '
            },
            'fashion': {
                name: 'æç¶“ç†',
                type: 'ä¸Šç­æ— | ç¬¬ 2 æ¬¡è³¼è²·',
                product: 'ç†Ÿå¥³æ°£è³ªç³»åˆ—é€£èº«è¤²',
                mainConcern: 'å°‹æ‰¾æ—¢èˆ’é©åˆé¡¯æ°£è³ªçš„ä¸Šç­æœï¼Œè‰²å½©æ­é…è¦ç¬¦åˆå†¬å­£è‰²ç³»',
                nextStep: 'å»ºè­°åŠ è³¼é…ä»¶ï¼ˆæ‰‹éŒ¶ã€çµ²å·¾ï¼‰ï¼Œé ç´„ç·šä¸Šç©¿æ­è«®è©¢ï¼Œäº«åœ˜è³¼ 15% æŠ˜æ‰£'
            },
            'beauty': {
                name: 'é™³å°å§',
                type: 'è­·è†šæ„›å¥½è€… | æ•æ„Ÿè‚Œ',
                product: 'æ¤èƒä¿®è­·ç²¾è¯æ¶²',
                mainConcern: 'å°‹æ‰¾æº«å’Œä¸åˆºæ¿€çš„ä¿é¤Šå“ï¼Œå®³æ€•æˆåˆ†è¤‡é›œ',
                nextStep: 'å»ºè­°è¨‚è³¼é«”é©—çµ„åˆï¼ˆ3 ä»¶ï¼‰ï¼Œäº« 30 å¤©æ»¿æ„åº¦ä¿è­‰ï¼Œå®šæœŸè­·è†šæŒ‡å°'
            },
            'food': {
                name: 'å…¬å¸æä¸»ä»»',
                type: 'åœ˜è³¼é‡‡è³¼ | ä¼æ¥­å®¢æˆ¶',
                product: 'æ–°é®®æœ‰æ©Ÿè”¬èœç®± (é€±é…)',
                mainConcern: 'ç‚ºè¾¦å…¬å®¤åŒä»è¨‚è³¼å¥åº·é¤é»ï¼Œè¦æ±‚å¯æº¯æºä¸”ç„¡è¾²è—¥',
                nextStep: 'å»ºè­°ç°½è¨‚ä¼æ¥­åˆç´„ï¼Œäº« 20% é•·æœŸæŠ˜æ‰£ï¼Œæä¾›å“¡å·¥ç‡Ÿé¤Šè«®è©¢'
            }
        };

        const getCustomerProfile = () => {
            const product = config.value.mainProduct;
            return customerProfiles[product] || customerProfiles['smart-home'];
        };

        return {
            // é…ç½®
            config, showConfigTip, onConfigChange,
            knowledgeSources, getSourceIcon,
            
            // ç‹€æ…‹
            currentStep, isScanning, showMenu,
            
            // è¨ˆç®—å±¬æ€§
            visibleMessages, currentStepLabel, currentStepScript,
            visibleChunks, currentLogs,
            conversationMetrics, satisfactionScore,
            sentimentType, sentimentLabel,
            
            // å®¢æˆ¶è³‡æ–™
            getCustomerProfile,
            
            // æ–¹æ³•
            nextStep, prevStep, resetFlow, goToStep, runScenario
        };
    }
}).mount('#app');
</script>

<style>
@keyframes fade-in { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
.animate-fade-in { animation: fade-in 0.4s ease-out forwards; }

/* Vue éæ¸¡å‹•ç•« */
.fade-enter-active, .fade-leave-active {
    transition: opacity 0.3s ease;
}
.fade-enter-from, .fade-leave-to {
    opacity: 0;
}

/* æŒ‰éˆ•é»æ“Šå‹•ç•« */
button {
    position: relative;
    overflow: hidden;
}

button::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.5);
    transform: translate(-50%, -50%);
    pointer-events: none;
}

button:active::after {
    animation: ripple 0.6s ease-out;
}

@keyframes ripple {
    to {
        width: 300px;
        height: 300px;
        opacity: 0;
    }
}

/* çµ±è¨ˆå¡ç‰‡å‹•ç•«å»¶é² */
.stat-card:nth-child(1) { animation-delay: 0ms; }
.stat-card:nth-child(2) { animation-delay: 100ms; }
.stat-card:nth-child(3) { animation-delay: 200ms; }
.stat-card:nth-child(4) { animation-delay: 300ms; }

/* è¨Šæ¯é€²å…¥å‹•ç•« */
.chat-message-enter-active {
    animation: message-enter 0.3s ease-out;
}

@keyframes message-enter {
    from {
        opacity: 0;
        transform: translateY(16px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}
</style>

</body>
</html>