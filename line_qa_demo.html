<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI æ··åˆå®¢æœæˆ°æƒ…å®¤ - æ·±åº¦å•†å‹™ç‰ˆ</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Noto+Sans+TC:wght@300;400;700;900&display=swap');
        
        :root {
            --primary: #3b82f6;
            --line-green: #00B900;
            --line-chat-bg: #8cabd9;
            --bg-dark: #0f172a;
            --card-bg: #1e293b;
        }

        * { box-sizing: border-box; }

        body { 
            font-family: 'Inter', 'Noto Sans TC', sans-serif; 
            background-color: var(--bg-dark);
            color: #f8fafc;
            overflow-x: hidden;
        }

        /* åƒæ•¸é…ç½®é¢æ¿ */
        .config-panel {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(34, 211, 238, 0.05));
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }

        .config-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-top: 12px;
        }

        .config-input {
            display: flex;
            flex-direction: column;
        }

        .config-input label {
            font-size: 12px;
            font-weight: 600;
            color: #94a3b8;
            margin-bottom: 6px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .config-input input,
        .config-input select {
            padding: 10px 12px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            color: #f8fafc;
            font-size: 13px;
            transition: all 0.2s;
        }

        .config-input input::placeholder {
            color: #64748b;
        }

        .config-input input:focus,
        .config-input select:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.12);
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
        }

        /* é€²åº¦æ¢å‹•ç•« */
        @keyframes progress-fill {
            from { width: 0; opacity: 0; }
            to { width: var(--progress); opacity: 1; }
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
            margin-top: 8px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #22d3ee);
            border-radius: 3px;
            transition: width 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 0 10px rgba(59, 130, 246, 0.6);
        }

        /* çµ±è¨ˆå¡ç‰‡ */
        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 12px;
            text-align: center;
            transition: all 0.3s;
        }

        .stat-card:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(59, 130, 246, 0.3);
            transform: translateY(-2px);
        }

        .stat-value {
            font-size: 20px;
            font-weight: 800;
            color: var(--primary);
            display: block;
        }

        .stat-label {
            font-size: 11px;
            color: #94a3b8;
            margin-top: 4px;
            text-transform: uppercase;
        }

        /* æ­¥é©Ÿé€²åº¦è¦–è¦ºåŒ– */
        .step-timeline {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            flex-wrap: wrap;
        }

        .timeline-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transition: all 0.3s;
            cursor: pointer;
        }

        .timeline-dot.active {
            background: var(--primary);
            box-shadow: 0 0 12px rgba(59, 130, 246, 0.6);
            transform: scale(1.3);
        }

        .timeline-dot.completed {
            background: #10b981;
        }

        /* å‹•ç•«å¢å¼· */
        @keyframes slide-in-up {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse-glow {
            0%, 100% {
                box-shadow: 0 0 10px rgba(59, 130, 246, 0.3);
            }
            50% {
                box-shadow: 0 0 20px rgba(59, 130, 246, 0.6);
            }
        }

        .animate-slide-in {
            animation: slide-in-up 0.4s ease-out;
        }

        .pulse-glow {
            animation: pulse-glow 2s ease-in-out infinite;
        }

        /* æƒ…æ„ŸæŒ‡æ¨™ */
        .sentiment-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            margin-top: 8px;
        }

        .sentiment-positive {
            background: rgba(16, 185, 129, 0.2);
            color: #86efac;
            border: 1px solid rgba(16, 185, 129, 0.4);
        }

        .sentiment-neutral {
            background: rgba(100, 116, 139, 0.2);
            color: #cbd5e1;
            border: 1px solid rgba(100, 116, 139, 0.4);
        }

        .sentiment-negative {
            background: rgba(239, 68, 68, 0.2);
            color: #fca5a5;
            border: 1px solid rgba(239, 68, 68, 0.4);
        }

        /* æ‰‹æ©Ÿç‰ˆï¼šå…¨å¯¬èª¿æ•´ */
        @media (max-width: 1024px) {
            body { overflow: auto; }
            #app { min-h: auto; }
        }

        .phone-mockup {
            width: 100%;
            max-width: 320px;
            height: 100vh;
            max-height: 720px;
            background: #000;
            border-radius: 40px;
            padding: 12px;
            box-shadow: 0 50px 100px -20px rgba(0,0,0,0.5);
            border: 4px solid #334155;
            position: relative;
        }

        @media (max-width: 768px) {
            .phone-mockup {
                border-radius: 12px;
                padding: 8px;
                height: 600px;
                max-height: none;
                border: 2px solid #334155;
            }
        }

        .phone-inner {
            width: 100%;
            height: 100%;
            background: var(--line-chat-bg);
            border-radius: 30px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        @media (max-width: 768px) {
            .phone-inner {
                border-radius: 8px;
            }
        }

        .line-header {
            background: rgba(43, 58, 74, 0.95);
            backdrop-filter: blur(10px);
            color: white;
            padding: 35px 12px 10px 12px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 20;
            flex-shrink: 0;
        }

        .line-header .fas { font-size: 14px; }
        .line-header span { font-size: 13px; font-weight: bold; }

        @media (max-width: 768px) {
            .line-header {
                padding: 30px 10px 8px 10px;
            }
            .line-header span { font-size: 12px; }
            .line-header .fas { font-size: 12px; }
        }

        /* LINE Rich Menu - å„ªåŒ–è§¸æ§å¤§å° */
        .rich-menu {
            height: auto;
            background: white;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: auto;
            border-top: 1px solid #ddd;
            z-index: 30;
            flex-shrink: 0;
        }
        
        .menu-item {
            border: 0.5px solid #eee;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 12px 8px;
            cursor: pointer;
            min-height: 56px;
            transition: background-color 0.2s;
        }

        .menu-item:active {
            background-color: #f0f0f0;
        }

        .menu-item i { font-size: 16px; margin-bottom: 4px; color: var(--line-green); }
        .menu-item span { font-size: 9px; color: #333; font-weight: bold; line-height: 1.2; }

        /* Flex Message Styles - éŸ¿æ‡‰å¼å¯¬åº¦ */
        .flex-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 230px;
        }

        @media (max-width: 768px) {
            .flex-card {
                max-width: 200px;
            }
        }

        .flex-header { 
            background: #1a1a1a; 
            color: white; 
            padding: 10px; 
            font-size: 11px; 
            font-weight: bold; 
            word-break: break-word;
        }
        
        .flex-hero { 
            height: 100px; 
            background: #f8f9fa; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            border-bottom: 1px solid #eee; 
        }
        
        .flex-body { 
            padding: 12px; 
        }
        
        .flex-row { 
            display: flex; 
            justify-content: space-between; 
            margin-bottom: 6px; 
            font-size: 10px; 
            gap: 8px;
        }
        
        .flex-btn { 
            background: var(--line-green); 
            color: white; 
            text-align: center; 
            padding: 10px 8px; 
            border-radius: 6px; 
            font-size: 12px; 
            font-weight: bold; 
            margin-top: 8px; 
            cursor: pointer;
            border: none;
            transition: opacity 0.2s;
            min-height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .flex-btn:active {
            opacity: 0.8;
        }

        .line-bubble-user {
            background: #85e249;
            color: #000;
            border-radius: 15px 2px 15px 15px;
            padding: 10px 14px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
            word-break: break-word;
        }

        .line-bubble-bot {
            background: white;
            color: #000;
            border-radius: 2px 15px 15px 15px;
            padding: 10px 14px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
            word-break: break-word;
        }

        .premium-card {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
        }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        .animate-scan {
            background: linear-gradient(to bottom, transparent, rgba(59, 130, 246, 0.2), transparent);
            background-size: 100% 100px;
            animation: scan 2s linear infinite;
        }

        @keyframes scan {
            0% { background-position: 0 -100px; }
            100% { background-position: 0 700px; }
        }

        /* æ‰‹æ©Ÿç‰ˆä½ˆå±€ */
        @media (max-width: 1024px) {
            main {
                flex-direction: column !important;
                gap: 4px !important;
                align-items: stretch !important;
                padding: 0 !important;
                max-width: 100% !important;
            }

            .flex-1 {
                flex: none !important;
                width: 100%;
            }

            .grid {
                grid-template-columns: 1fr !important;
            }

            header {
                padding: 12px 16px !important;
            }

            .grid.grid-cols-1.xl\\:grid-cols-2 {
                grid-template-columns: 1fr !important;
            }
        }

        [v-cloak] { display: none; }
    </style>
</head>
<body>

<div id="app" v-cloak class="min-h-screen flex flex-col">
    <!-- é é¢ä»‹ç´¹å€å¡Š -->
    <section class="bg-gradient-to-r from-blue-900/40 to-cyan-900/40 border-b border-white/10">
        <div class="max-w-[1700px] mx-auto px-4 sm:px-6 py-6 sm:py-8">
            <div class="flex flex-col gap-6">
                <!-- æ¨™é¡Œå’Œèªªæ˜ -->
                <div class="animate-slide-in">
                    <h1 class="text-2xl sm:text-3xl font-black mb-2">
                        <span class="text-[#00B900]">â–¸ LINE AI æ··åˆå®¢æœæ™ºèƒ½å¼•æ“</span>
                    </h1>
                    <p class="text-sm sm:text-base text-slate-300 max-w-2xl">
                        åŸºæ–¼ Vision + RAG çš„å¤šæ¨¡æ…‹å®¢æœæ¼”ç¤ºã€‚é…ç½®æ‚¨çš„åº—å®¶åƒæ•¸ï¼ŒAI å°‡è‡ªå‹•é©é…èŠå¤©å…§å®¹ã€æ¨è–¦ç­–ç•¥å’Œå•†å‹™é‚è¼¯ã€‚
                    </p>
                </div>

                <!-- åƒæ•¸é…ç½®é¢æ¿ -->
                <div class="config-panel">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-sm font-bold text-white flex items-center gap-2">
                            <i class="fas fa-sliders-h text-blue-400"></i>
                            åº—å®¶åŸºæœ¬åƒæ•¸è¨­å®š
                        </h2>
                        <button @click="showConfigTip = !showConfigTip" class="text-xs text-blue-400 hover:text-blue-300 transition">
                            {{ showConfigTip ? 'æ”¶èµ·æç¤º' : 'é¡¯ç¤ºæç¤º' }}
                        </button>
                    </div>
                    
                    <transition name="fade">
                        <p v-if="showConfigTip" class="text-xs text-slate-400 mb-4 bg-blue-500/10 p-3 rounded border border-blue-500/20">
                            ğŸ’¡ æç¤ºï¼šä¿®æ”¹ä¸‹æ–¹åƒæ•¸å¾Œï¼Œchatbot æœƒè‡ªå‹•èª¿æ•´æ¨è–¦å…§å®¹ã€ç”¢å“ä¿¡æ¯å’Œå•†å‹™ç­–ç•¥ã€‚å˜—è©¦ä¸åŒè¡Œæ¥­å’Œé¡åˆ¥çœ‹çœ‹æ•ˆæœï¼
                        </p>
                    </transition>

                    <div class="config-grid">
                        <div class="config-input">
                            <label>åº—å®¶/å“ç‰Œåç¨±</label>
                            <input v-model="config.shopName" type="text" placeholder="ä¾‹ï¼šæ™ºæ…§å®¶å±…å°ˆå®¶" @input="onConfigChange">
                        </div>
                        <div class="config-input">
                            <label>è¡Œæ¥­é¡åˆ¥</label>
                            <select v-model="config.industry" @change="onConfigChange">
                                <option value="smart-home">æ™ºæ…§å®¶å±…</option>
                                <option value="restaurant">é¤é£²</option>
                                <option value="retail">é›¶å”®</option>
                                <option value="education">æ•™è‚²</option>
                                <option value="tech">ç§‘æŠ€ç”¢å“</option>
                                <option value="finance">é‡‘èæœå‹™</option>
                            </select>
                        </div>
                        <div class="config-input">
                            <label>ä¸»ç‡Ÿç”¢å“/æœå‹™</label>
                            <input v-model="config.mainProduct" type="text" placeholder="ä¾‹ï¼šæ™ºèƒ½é–‹é—œç³»çµ±" @input="onConfigChange">
                        </div>
                        <div class="config-input">
                            <label>ç›®æ¨™å®¢ç¾¤</label>
                            <select v-model="config.targetAudience" @change="onConfigChange">
                                <option value="residential">ä½å®…ç”¨æˆ¶</option>
                                <option value="commercial">å•†æ¥­å®¢æˆ¶</option>
                                <option value="both">å…©è€…å‡æœ‰</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Top Header -->
    <header class="p-3 sm:p-4 sm:px-8 flex flex-col sm:flex-row justify-between items-start sm:items-center border-b border-white/5 bg-slate-900/80 sticky top-0 z-40 gap-2">
        <div class="flex items-center space-x-3 w-full sm:w-auto">
            <div class="w-9 h-9 sm:w-10 sm:h-10 bg-[#00B900] rounded-xl flex items-center justify-center flex-shrink-0">
                <i class="fab fa-line text-xl sm:text-2xl text-white"></i>
            </div>
            <div class="min-w-0">
                <h2 class="text-sm sm:text-base font-black tracking-tighter">{{ config.shopName || 'AI å®¢æœåŠ©æ‰‹' }}</h2>
                <p class="text-[8px] sm:text-[9px] text-slate-500 font-bold uppercase tracking-widest">RAG é©…å‹• | å¤šæ¨¡æ…‹è­˜åˆ¥</p>
            </div>
        </div>
        <div class="hidden sm:flex items-center space-x-4">
            <div class="text-right mr-4">
                <p class="text-[9px] text-slate-500 font-bold">å°è©±è³ªé‡</p>
                <p class="text-xs font-bold text-green-400">{{ satisfactionScore }}% æ»¿æ„åº¦</p>
            </div>
            <button @click="resetFlow" class="px-4 py-2 bg-slate-800 rounded-lg text-xs font-bold hover:bg-slate-700 transition">é‡å•Ÿæ¼”ç·´</button>
        </div>
        <button @click="resetFlow" class="sm:hidden w-full px-3 py-2 bg-slate-800 rounded-lg text-xs font-bold hover:bg-slate-700 transition">é‡å•Ÿæ¼”ç·´</button>
    </header>

    <main class="flex-1 p-3 sm:p-6 flex flex-col lg:flex-row gap-3 sm:gap-8 items-start justify-center max-w-[1700px] mx-auto w-full">
        
        <!-- Left: Phone Simulator -->
        <div class="flex flex-col items-center space-y-3 sm:space-y-4 w-full lg:w-auto lg:shrink-0">
            <div class="w-full sm:w-auto">
                <div class="phone-mockup">
                    <div class="phone-inner">
                        <div class="line-header">
                            <i class="fas fa-chevron-left"></i>
                            <span class="flex-1 text-center px-2 truncate">æ™ºæ…§å®¶å±…å°ˆå®¶ - AI</span>
                            <div class="flex space-x-2 text-xs">
                                <i class="fas fa-search"></i>
                                <i class="fas fa-bars"></i>
                            </div>
                        </div>
                        
                        <div class="flex-1 overflow-y-auto p-3 space-y-3 no-scrollbar text-sm" id="chat-box">
                            <div v-for="(msg, i) in visibleMessages" :key="i" class="flex flex-col" :class="msg.role === 'user' ? 'items-end' : 'items-start'">
                                
                                <!-- User/Bot Text Message -->
                                <div v-if="!msg.isFlex && !msg.isImage" class="flex items-start max-w-[95%]" :class="msg.role === 'user' ? 'flex-row-reverse' : 'flex-row'">
                                    <div v-if="msg.role !== 'user'" class="w-6 h-6 sm:w-7 sm:h-7 rounded-full bg-[#00B900] mr-2 flex-shrink-0 flex items-center justify-center">
                                        <i v-if="msg.role === 'bot'" class="fas fa-robot text-white text-[9px]"></i>
                                        <img v-else src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix" class="rounded-full">
                                    </div>
                                    <div class="flex flex-col" :class="msg.role === 'user' ? 'items-end' : 'items-start'">
                                        <div :class="[msg.role === 'user' ? 'line-bubble-user' : 'line-bubble-bot']">
                                            <p class="text-[10px] sm:text-[11px] leading-snug break-words">{{ msg.text }}</p>
                                        </div>
                                        <span class="text-[7px] sm:text-[8px] text-slate-500 mt-1">17:05</span>
                                    </div>
                                </div>

                                <!-- Image Upload (Simulation) -->
                                <div v-if="msg.isImage" class="flex items-end flex-row-reverse max-w-[95%] animate-fade-in">
                                    <div class="rounded-xl overflow-hidden border-2 border-[#85e249] shadow-lg">
                                        <div class="w-28 h-28 sm:w-32 sm:h-32 bg-slate-200 flex flex-col items-center justify-center text-slate-400">
                                            <i class="fas fa-camera text-2xl mb-1"></i>
                                            <span class="text-[8px] sm:text-[9px] font-bold text-center px-1">ä¸Šå‚³ç…§ç‰‡ä¸­...</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Flex Message (Rich Text) -->
                                <div v-if="msg.isFlex" class="flex items-start max-w-[95%] flex-row animate-fade-in">
                                    <div class="w-6 h-6 sm:w-7 sm:h-7 rounded-full bg-[#00B900] mr-2 flex-shrink-0 flex items-center justify-center"><i class="fas fa-robot text-white text-[9px]"></i></div>
                                    <div class="flex-card">
                                        <div class="flex-header">{{ msg.flexTitle }}</div>
                                        <div v-if="msg.hasHero" class="flex-hero">
                                            <i class="fas fa-file-pdf text-4xl text-red-500"></i>
                                        </div>
                                        <div class="flex-body">
                                            <div v-for="row in msg.flexRows" class="flex-row">
                                                <span class="text-slate-400">{{ row.label }}</span>
                                                <span class="font-bold text-[#333]">{{ row.value }}</span>
                                            </div>
                                            <div class="flex-btn">{{ msg.flexBtn }}</div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <!-- Rich Menu -->
                        <div v-if="showMenu" class="rich-menu animate-fade-in">
                            <div class="menu-item"><i class="fas fa-box-open"></i><span>ç”¢å“ä»‹ç´¹</span></div>
                            <div class="menu-item"><i class="fas fa-camera-retro"></i><span>ç›¸å®¹æ€§è­˜åˆ¥</span></div>
                            <div class="menu-item"><i class="fas fa-book-reader"></i><span>æ‰‹å†Šä¸‹è¼‰</span></div>
                            <div class="menu-item"><i class="fas fa-user-shield"></i><span>æœƒå“¡ä¸­å¿ƒ</span></div>
                            <div class="menu-item"><i class="fas fa-question-circle"></i><span>æ’é™¤æ•…éšœ</span></div>
                            <div class="menu-item" style="background: #f0fff0;"><i class="fas fa-headset"></i><span>çœŸäººå°ˆå“¡</span></div>
                        </div>

                        <!-- Input Bar -->
                        <div class="bg-white p-3 sm:p-4 flex items-center gap-2 sm:gap-3 flex-shrink-0">
                            <button @click="showMenu = !showMenu" class="text-slate-400 flex-shrink-0 min-h-10 min-w-10 flex items-center justify-center"><i class="fas fa-th-large text-sm"></i></button>
                            <div class="flex-1 bg-slate-100 rounded-full py-2 px-3 text-[9px] sm:text-[10px] text-slate-400 italic flex items-center min-h-10">è¼¸å…¥è¨Šæ¯æˆ–ä¸Šå‚³åœ–ç‰‡...</div>
                            <button class="text-slate-400 flex-shrink-0 min-h-10 min-w-10 flex items-center justify-center"><i class="far fa-smile text-sm"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right: System Operations -->
        <div class="flex-1 flex flex-col space-y-4 sm:space-y-6 w-full">
            <!-- Execution Step -->
            <div class="premium-card p-4 sm:p-6 flex flex-col border-l-4 border-blue-500 gap-3 sm:gap-4">
                <div class="flex items-center justify-between flex-wrap gap-2">
                    <span class="text-[8px] sm:text-[10px] font-black text-slate-500 uppercase tracking-widest">Automated Workflow Execution</span>
                    <span class="text-xs font-black text-blue-500">Step {{ currentStep }} / 14</span>
                </div>
                <h3 class="text-base sm:text-lg font-bold text-white mb-2 italic break-words">ç›®æ¨™ï¼š{{ currentStepLabel }}</h3>
                <div class="flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:gap-3">
                    <button @click="prevStep" :disabled="currentStep === 1" class="w-full sm:w-10 h-10 rounded-xl bg-slate-800 flex items-center justify-center disabled:opacity-30 text-sm sm:text-base"><i class="fas fa-chevron-left"></i></button>
                    <div class="flex-1 p-3 bg-blue-500/10 border border-blue-500/30 rounded-xl min-h-12 flex items-center">
                        <p class="text-[9px] sm:text-xs text-blue-300 font-bold leading-relaxed break-words">{{ currentStepScript }}</p>
                    </div>
                    <button @click="nextStep" :disabled="currentStep === 14" class="w-full sm:w-auto h-10 px-4 sm:px-6 bg-blue-600 hover:bg-blue-500 text-white rounded-xl font-black text-xs shadow-lg shadow-blue-900/40 transition disabled:opacity-30">ä¸‹ä¸€éšæ®µ</button>
                </div>
            </div>

            <div class="flex-1 grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6">
                <!-- æµç¨‹é€²åº¦å’Œçµ±è¨ˆ -->
                <div class="premium-card flex flex-col overflow-hidden">
                    <div class="p-3 sm:p-4 border-b border-white/5 bg-white/5">
                        <span class="text-[9px] sm:text-[10px] font-black text-slate-400 uppercase">æµç¨‹é€²åº¦åˆ†æ</span>
                    </div>
                    <div class="flex-1 p-4 sm:p-5 space-y-4">
                        <!-- ä¸»é€²åº¦æ¢ -->
                        <div>
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-xs font-bold text-slate-300">æ•´é«”é€²åº¦</span>
                                <span class="text-sm font-bold text-blue-400">{{ Math.round((currentStep / 14) * 100) }}%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" :style="{ width: (currentStep / 14) * 100 + '%' }"></div>
                            </div>
                        </div>

                        <!-- çµ±è¨ˆå¡ç‰‡ç¶²æ ¼ -->
                        <div class="grid grid-cols-2 gap-3">
                            <div class="stat-card animate-slide-in">
                                <span class="stat-value">{{ currentStep }}</span>
                                <span class="stat-label">ç•¶å‰éšæ®µ</span>
                            </div>
                            <div class="stat-card animate-slide-in">
                                <span class="stat-value">{{ visibleMessages.length }}</span>
                                <span class="stat-label">å°è©±è¼ªæ•¸</span>
                            </div>
                            <div class="stat-card animate-slide-in">
                                <span class="stat-value">{{ conversationMetrics.questionCount }}</span>
                                <span class="stat-label">æå•æ¬¡æ•¸</span>
                            </div>
                            <div class="stat-card animate-slide-in">
                                <span class="stat-value">{{ conversationMetrics.videoFrames }}ms</span>
                                <span class="stat-label">å›æ‡‰å»¶é²</span>
                            </div>
                        </div>

                        <!-- æ­¥é©ŸæŒ‡ç¤ºå™¨ -->
                        <div>
                            <span class="text-xs font-bold text-slate-400 mb-2 block">æ­¥é©Ÿæ™‚é–“ç·š</span>
                            <div class="step-timeline">
                                <div v-for="i in 14" :key="i" 
                                     class="timeline-dot"
                                     :class="{ 
                                        'active': i === currentStep,
                                        'completed': i < currentStep
                                     }"
                                     @click="goToStep(i)"
                                     :title="`æ­¥é©Ÿ ${i}`">
                                </div>
                            </div>
                        </div>

                        <!-- å°è©±æ»¿æ„åº¦ -->
                        <div>
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-xs font-bold text-slate-300">é ä¼°æ»¿æ„åº¦</span>
                                <span class="text-sm font-bold text-green-400">{{ satisfactionScore }}%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" :style="{ width: satisfactionScore + '%', background: 'linear-gradient(90deg, #10b981, #34d399)' }"></div>
                            </div>
                            <span :class="['sentiment-badge', 'sentiment-' + sentimentType]">
                                {{ sentimentLabel }}
                            </span>
                        </div>
                    </div>
                </div>

                <!-- RAG Logic Detail -->
                <div class="premium-card flex flex-col overflow-hidden min-h-96">
                    <div class="p-3 sm:p-4 border-b border-white/5 bg-white/5 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2">
                        <span class="text-[9px] sm:text-[10px] font-black text-slate-400 uppercase">çŸ¥è­˜æª¢ç´¢å¼•æ“</span>
                        <div class="flex space-x-2">
                            <span class="text-[8px] sm:text-[9px] text-blue-500 font-bold whitespace-nowrap">å„ªåŒ–ç‹€æ…‹: ON</span>
                        </div>
                    </div>
                    <div class="flex-1 p-4 sm:p-5 overflow-y-auto no-scrollbar space-y-3 sm:space-y-4 relative">
                        <div v-if="isScanning" class="absolute inset-0 animate-scan z-10 pointer-events-none"></div>
                        
                        <div v-for="(chunk, idx) in visibleChunks" :key="idx" 
                             class="p-3 sm:p-4 rounded-xl border border-white/5 bg-slate-800/40 animate-fade-in animate-slide-in"
                             :style="{ 'animation-delay': idx * 100 + 'ms' }">
                            <div class="flex items-center justify-between mb-2 gap-2 flex-wrap">
                                <div class="flex items-center space-x-2">
                                    <i class="fas fa-database text-blue-500 text-[9px] sm:text-[10px]"></i>
                                    <span class="text-[8px] sm:text-[9px] font-black text-slate-500 uppercase">çŸ¥è­˜ç‰‡æ®µ #{{ idx+1 }}</span>
                                </div>
                                <span class="text-[7px] sm:text-[8px] bg-blue-500/20 text-blue-400 px-2 py-0.5 rounded whitespace-nowrap">ç›¸é—œæ€§: 0.{{ 98 - idx }}</span>
                            </div>
                            <p class="text-[10px] sm:text-[11px] text-slate-300 leading-relaxed italic break-words">"{{ chunk }}"</p>
                        </div>
                    </div>
                </div>

                <!-- Live Logs - æ”¹é€²ç‰ˆ -->
                <div class="premium-card flex flex-col overflow-hidden min-h-96 lg:col-span-2">
                    <div class="p-3 sm:p-4 border-b border-white/5 bg-white/5 flex items-center justify-between">
                        <span class="text-[9px] sm:text-[10px] font-black text-slate-400 uppercase">ç³»çµ±æ—¥èªŒ & æ±ºç­–è¿½è¹¤</span>
                        <span class="text-[8px] text-blue-400">{{ currentLogs.length }} å€‹äº‹ä»¶</span>
                    </div>
                    <div class="flex-1 p-4 sm:p-5 overflow-y-auto no-scrollbar">
                        <div class="space-y-3 sm:space-y-4">
                            <div v-for="(log, idx) in currentLogs" :key="idx" class="flex space-x-3 border-b border-white/5 pb-3 animate-slide-in"
                                 :style="{ 'animation-delay': idx * 50 + 'ms' }">
                                <div class="flex-shrink-0">
                                    <div class="w-2 h-2 rounded-full mt-2" :class="log.type === 'action' ? 'bg-green-500' : log.type === 'vision' ? 'bg-yellow-500' : 'bg-blue-500'"></div>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <div class="flex items-start justify-between gap-2">
                                        <div>
                                            <p class="text-[10px] sm:text-[11px] font-bold text-slate-200 break-words">{{ log.title }}</p>
                                            <p class="text-[9px] sm:text-[10px] text-slate-500 break-words mt-1">{{ log.desc }}</p>
                                        </div>
                                        <span class="text-[7px] text-slate-600 whitespace-nowrap mt-0.5">{{ log.icon }}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>

<script>
const { createApp, ref, computed, nextTick } = Vue;

createApp({
    setup() {
        // ========== åƒæ•¸é…ç½® ==========
        const config = ref({
            shopName: 'æ™ºæ…§å®¶å±…å°ˆå®¶',
            industry: 'smart-home',
            mainProduct: 'æ™ºèƒ½é–‹é—œç³»çµ±',
            targetAudience: 'both'
        });

        const showConfigTip = ref(true);

        const onConfigChange = () => {
            // é‡æ–°ç”Ÿæˆæµç¨‹å…§å®¹ï¼ˆåŸºæ–¼æ–°é…ç½®ï¼‰
            regenerateFlow();
        };

        // ========== ç‹€æ…‹ç®¡ç† ==========
        const currentStep = ref(1);
        const isScanning = ref(false);
        const showMenu = ref(true);

        // ========== åŸºç¤æµç¨‹æ¨¡æ¿ ==========
        const flowTemplate = {
            'smart-home': [
                { step: 1, label: 'éœ€æ±‚å•Ÿå‹•', role: 'user', text: 'ä½ å¥½ï¼Œæˆ‘æƒ³äº†è§£æ™ºæ…§å®¶å±…ç³»çµ±ã€‚', script: 'ç”¨æˆ¶å•Ÿå‹•æœƒè©±ï¼ŒAI é€²å…¥ã€Œå¼•å°è«®è©¢ã€æ¨¡å¼ã€‚' },
                { step: 2, label: 'ä¸»å‹•è©¢å•', role: 'bot', text: 'æ­¡è¿ï¼ç‚ºäº†çµ¦æ‚¨æœ€ç²¾æº–çš„å»ºè­°ï¼Œèƒ½å…ˆè«‹å•æ‚¨ç›®å‰å®¶ä¸­çš„æ™ºæ…§è¨­å‚™å“ç‰Œå—ï¼Ÿ', script: 'AI åŸ·è¡Œå¼•å°ç­–ç•¥ï¼Œè­˜åˆ¥ç”¨æˆ¶è¨­å‚™ç”Ÿæ…‹ç³»ã€‚' },
                { step: 3, label: 'ç”¨æˆ¶å›é¥‹', role: 'user', text: 'æˆ‘ç›®å‰æ˜¯ç”¨å‚³çµ±é–‹é—œï¼Œä½†æœ‰ä¸€äº›èˆŠæ¬¾çš„ Philips Hue ç‡ˆæ³¡ã€‚', script: 'ç”¨æˆ¶æä¾›é—œéµä¿¡æ¯ï¼Œç³»çµ±æ¨™è¨˜ã€Œæ··åˆç’°å¢ƒç›¸å®¹æ€§ã€éœ€æ±‚ã€‚' },
                { step: 4, label: 'è¦–è¦ºè­˜åˆ¥å¼•å°', role: 'bot', text: 'æ˜ç™½äº†ï¼Philips Hue å¯ä»¥å®Œç¾æ•´åˆã€‚æ‚¨èƒ½æ‹ä¸€å¼µé–‹é—œç›’çš„ç…§ç‰‡å‚³çµ¦æˆ‘å—ï¼Ÿ', script: 'AI å•Ÿå‹• Vision æ¨¡çµ„ï¼Œè¦æ±‚ç‰¹å®šåœ–åƒã€‚' },
                { step: 5, label: 'åœ–ç‰‡ä¸Šå‚³', role: 'user', isImage: true, script: 'ç”¨æˆ¶ä¸Šå‚³ç…§ç‰‡ï¼Œç³»çµ±å•Ÿå‹•å¤šæ¨¡æ…‹è­˜åˆ¥ã€‚' },
                { step: 6, label: 'AI è¦–è¦ºè­˜åˆ¥', role: 'bot', text: 'è­˜åˆ¥å®Œæˆï¼æ‚¨çš„åº•ç›’å…·å‚™ä¸­æ€§ç·šï¼Œå¯ä»¥é¸æ“‡å…é›»æ± çš„ã€SmartHub Proã€ç³»åˆ—ã€‚', script: 'Vision AI æˆåŠŸè­˜åˆ¥ï¼ŒRAG é–å®šå°æ‡‰ç”¢å“ç·šã€‚' },
                { step: 7, label: 'ç”¢å“æ¨è–¦', role: 'bot', isFlex: true, 
                  flexTitle: 'å»ºè­°æ–¹æ¡ˆï¼šSmartHub Pro (æœ‰ç·šç‰ˆ)',
                  flexRows: [
                      { label: 'ç›¸å®¹æ€§', value: 'Philips Hue å¯ç”¨' },
                      { label: 'å®‰è£æ¢ä»¶', value: 'å…·å‚™ä¸­æ€§ç·š' },
                      { label: 'å‹è™Ÿ', value: 'SW-PRO-101' }
                  ],
                  flexBtn: 'æŸ¥çœ‹è©³æƒ…', script: 'ç³»çµ±ç”Ÿæˆ Flex Messageï¼Œæ¨è–¦å°æ‡‰ç”¢å“ã€‚' },
                { step: 8, label: 'æ–‡æª”æ¨é€', role: 'bot', isFlex: true,
                  hasHero: true,
                  flexTitle: 'SmartHub Pro å®‰è£æŒ‡å—',
                  flexRows: [
                      { label: 'ç‰ˆæœ¬', value: 'v2.4 (2025)' },
                      { label: 'å¤§å°', value: '4.2 MB' }
                  ],
                  flexBtn: 'ä¸‹è¼‰ PDF', script: 'RAG å®šä½ç›¸é—œæ–‡æª”ä¸¦æ¨é€ã€‚' },
                { step: 9, label: 'é€²éšè©¢å•', role: 'user', text: 'æ–·ç¶²æ™‚æœ¬åœ°è¯å‹•é‚„èƒ½å‹•å—ï¼Ÿ', script: 'ç”¨æˆ¶æå‡ºæŠ€è¡“ç–‘æ…®ã€‚' },
                { step: 10, label: 'æŠ€è¡“è§£ç­”', role: 'bot', text: 'SmartHub Pro æ”¯æ´é‚Šç·£é‹ç®—ï¼Œæ–·ç¶²æ™‚æœ¬åœ°å ´æ™¯ä»æ­£å¸¸é‹ä½œï¼', script: 'AI æå–æŠ€è¡“æ–‡æª”é€²è¡Œè§£ç­”ã€‚' },
                { step: 11, label: 'å•†å‹™å‡ç´š', role: 'user', text: 'æˆ‘å€‘å…¬å¸è¾¦å…¬å®¤ä¹Ÿæƒ³è£ï¼Œéœ€è¦ 60 å€‹é–‹é—œã€‚', script: 'è­˜åˆ¥åˆ°å¤§å®—æ¡è³¼ä¿¡è™Ÿã€‚' },
                { step: 12, label: 'å ±åƒ¹æ–¹æ¡ˆ', role: 'bot', isFlex: true,
                  flexTitle: 'å•†ç”¨æ–¹æ¡ˆå ±åƒ¹',
                  flexRows: [
                      { label: 'æ•¸é‡', value: '60 Units' },
                      { label: 'å–®åƒ¹', value: 'NT$ 1,200' },
                      { label: 'æŠ˜æ‰£', value: '85 æŠ˜' }
                  ],
                  flexBtn: 'é ç´„å‹˜æŸ¥', script: 'è‡ªå‹•è¨ˆç®—æŠ˜æ‰£ä¸¦ç”Ÿæˆå ±åƒ¹ã€‚' },
                { step: 13, label: 'çœŸäººè½‰æ¥', role: 'human', text: 'æ‚¨å¥½ï¼Œæˆ‘æ˜¯å•†å‹™ç¶“ç†ã€‚çœ‹åˆ°æ‚¨æœ‰å¤§å‹å»ºæ¡ˆéœ€æ±‚ï¼Œæˆ‘å¯ä»¥å¸¶æ¨£å“æ‹œè¨ªå—ï¼Ÿ', script: 'è§¸ç™¼è‡ªå‹•è½‰æ¥ã€‚' },
                { step: 14, label: 'å®Œæˆé ç´„', role: 'user', text: 'å¤ªå¥½äº†ï¼ä¸‹é€±ä¸‰ä¸‹åˆ 2 é»å¯ä»¥å—ï¼Ÿ', script: 'æˆåŠŸå®Œæˆå…¨æµç¨‹ã€‚' }
            ],
            'restaurant': [
                { step: 1, label: 'åˆæ¬¡å•å€™', role: 'user', text: 'ä½ å¥½ï¼Œæˆ‘æƒ³äº†è§£ä½ å€‘çš„èœå–®ã€‚', script: 'å®¢æˆ¶åˆæ¬¡äº’å‹•ã€‚' },
                { step: 2, label: 'æ­¡è¿å›æ‡‰', role: 'bot', text: 'æ­¡è¿å…‰è‡¨ï¼æˆ‘å€‘æœ‰ç‰¹è£½å’–å•¡å’Œæ–°é®®ç”œé»ï¼Œä»Šå¤©æœ‰ä»€éº¼ç‰¹åˆ¥æ¨è–¦çµ¦æ‚¨å—ï¼Ÿ', script: 'AI å±•ç¤ºèœå–®ç‰¹è‰²ã€‚' },
                { step: 3, label: 'å®¢æˆ¶éœ€æ±‚', role: 'user', text: 'æˆ‘å°ç´ é£Ÿé¸é …æ„Ÿèˆˆè¶£ã€‚', script: 'å®¢æˆ¶è¡¨é”åå¥½ã€‚' },
                { step: 4, label: 'èœå–®æ¨è–¦', role: 'bot', text: 'å¤ªå¥½äº†ï¼æˆ‘å€‘æœ‰æ‹›ç‰Œç´ é£Ÿæ²™æ‹‰å’Œæœ‰æ©Ÿè”¬èœæ¹¯ã€‚', script: 'RAG æª¢ç´¢å°æ‡‰èœå“ã€‚' },
                { step: 5, label: 'åœ–ç‰‡ç¢ºèª', role: 'user', isImage: true, script: 'å®¢æˆ¶æ‹ç…§ç¢ºèªèœå“ã€‚' },
                { step: 6, label: 'AI è­˜åˆ¥', role: 'bot', text: 'é€™æ˜¯æˆ‘å€‘çš„æœ‰æ©Ÿæ²™æ‹‰ï¼Œä½¿ç”¨ç•¶å­£æ–°é®®é£Ÿæï¼Œä»Šæ—¥ç‰¹åƒ¹ 20% æŠ˜æ‰£ï¼', script: 'Vision è­˜åˆ¥èœå“ï¼Œæ¨è–¦å„ªæƒ ã€‚' },
                { step: 7, label: 'å„ªæƒ æ¨è–¦', role: 'bot', isFlex: true,
                  flexTitle: 'ä»Šæ—¥æ¨è–¦çµ„åˆ',
                  flexRows: [
                      { label: 'æ²™æ‹‰ + é£²æ–™', value: 'NT$ 280' },
                      { label: 'æŠ˜æ‰£', value: '20% å„ªæƒ ' },
                      { label: 'æœ‰æ•ˆæœŸ', value: 'ä»Šæ—¥' }
                  ],
                  flexBtn: 'ç«‹å³è¨‚è³¼', script: 'æ¨é€å¥—é¤å„ªæƒ ã€‚' },
                { step: 8, label: 'è¨‚å–®ç¢ºèª', role: 'user', text: 'å¥½çš„ï¼Œæˆ‘è¦é»ä¸€ä»½ï¼', script: 'å®¢æˆ¶ç¢ºèªè¨‚å–®ã€‚' },
                { step: 9, label: 'é…é€è©¢å•', role: 'user', text: 'å¯ä»¥å¤–é€å—ï¼Ÿ', script: 'å®¢æˆ¶è©¢å•é…é€ã€‚' },
                { step: 10, label: 'é…é€èªªæ˜', role: 'bot', text: 'ç•¶ç„¶å¯ä»¥ï¼æˆ‘å€‘æä¾› 30 åˆ†é˜å…§å¤–é€ï¼Œé…é€è²» NT$ 30ã€‚', script: 'RAG æä¾›é…é€ä¿¡æ¯ã€‚' },
                { step: 11, label: 'åœ˜è³¼å»ºè­°', role: 'user', text: 'æˆ‘å€‘è¾¦å…¬å®¤ 10 äººæƒ³åœ˜è³¼åˆé¤ã€‚', script: 'å‡ç´šç‚ºåœ˜è³¼æ©Ÿæœƒã€‚' },
                { step: 12, label: 'åœ˜è³¼æ–¹æ¡ˆ', role: 'bot', isFlex: true,
                  flexTitle: 'åœ˜è³¼å„ªæƒ æ–¹æ¡ˆ',
                  flexRows: [
                      { label: 'äººæ•¸', value: '10 äºº' },
                      { label: 'å–®äººåƒ¹', value: 'NT$ 250' },
                      { label: 'åœ˜è³¼çœ', value: 'NT$ 200' }
                  ],
                  flexBtn: 'ç¢ºèªåœ˜è³¼', script: 'ç”Ÿæˆåœ˜è³¼å ±åƒ¹ã€‚' },
                { step: 13, label: 'å°ˆå“¡è¯ç¹«', role: 'human', text: 'æ‚¨å¥½ï¼æˆ‘æ˜¯é¤é£²ç¶“ç†ã€‚åœ˜è³¼å¯ä»¥å®¢è£½åŒ–èœå–®ï¼Œæˆ‘å€‘å¯ä»¥è©³è«‡å—ï¼Ÿ', script: 'çœŸäººç¶“ç†æ¥æ‰‹ã€‚' },
                { step: 14, label: 'é ç´„ç¢ºèª', role: 'user', text: 'å¥½çš„ï¼Œæ˜å¤©ä¸­åˆèƒ½è¨è«–å—ï¼Ÿ', script: 'æˆåŠŸè½‰æ›å•†æ©Ÿã€‚' }
            ]
        };

        // ç•¶å‰æµç¨‹
        let flow = flowTemplate['smart-home'];

        const regenerateFlow = () => {
            const industry = config.value.industry;
            flow = flowTemplate[industry] || flowTemplate['smart-home'];
            currentStep.value = 1;
            showMenu.value = true;
        };

        // ========== çŸ¥è­˜åº« ==========
        const knowledgeChunks = computed(() => {
            const chunks = {
                'smart-home': [
                    "ä¸­æ€§ç·šåˆ¤å®šé‚è¼¯ï¼šé€é Vision è­˜åˆ¥è—è‰²/ç™½è‰²ç·šè·¯ï¼Œä¸¦ç¢ºèªé›»ä½é—œä¿‚ã€‚",
                    "æœ¬åœ°é€£ç·šå”å®šï¼šZigbee 3.0 èˆ‡ Thread æ··åˆæ¶æ§‹ï¼Œä¸ç¶“é›²ç«¯ã€‚",
                    "å•†å‹™æŠ˜æ‰£è¦å‰‡ï¼š50-99 å°ç‚º 85 æŠ˜ï¼Œ100 å°ä»¥ä¸Š 75 æŠ˜ã€‚",
                    "Philips Hue æ•´åˆï¼šæœ¬åœ° Bridge API æ¡æ‰‹ï¼Œå»¶é² < 50msã€‚"
                ],
                'restaurant': [
                    "èœå–®å„ªåŒ–ï¼šåŸºæ–¼å­£ç¯€å’Œå®¢ç¾¤åå¥½å‹•æ…‹æ¨è–¦ã€‚",
                    "é…é€æ”¿ç­–ï¼š30 åˆ†å…§å¤–é€ï¼Œé…è²» NT$30ï¼Œ3 å…¬é‡Œå…§å…è²»ã€‚",
                    "åœ˜è³¼æŠ˜æ‰£ï¼š10-20 äºº 15% æŠ˜ï¼Œ20-30 äºº 20% æŠ˜ã€‚",
                    "éæ•ä¿¡æ¯ï¼šå«å …æœã€ä¹³è£½å“èœå“å·²æ¨™è¨˜ã€‚"
                ]
            };
            return chunks[config.value.industry] || chunks['smart-home'];
        });

        // ========== è¨ˆç®—å±¬æ€§ ==========
        const visibleMessages = computed(() => flow.filter(f => f.step <= currentStep.value));
        const currentStepLabel = computed(() => flow[currentStep.value-1]?.label);
        const currentStepScript = computed(() => flow[currentStep.value-1]?.script);
        const visibleChunks = computed(() => knowledgeChunks.value.filter((_, i) => i < Math.ceil(currentStep.value / 3)));
        
        const currentLogs = computed(() => {
            const l = [];
            const steps = flow.slice(0, currentStep.value).reverse();
            steps.forEach(s => {
                const iconMap = {
                    'action': 'âœ“',
                    'vision': 'ğŸ‘ï¸',
                    'system': 'âš™ï¸'
                };
                const type = s.role === 'human' ? 'action' : s.isImage ? 'vision' : 'system';
                l.push({ 
                    title: s.label, 
                    desc: s.script, 
                    type: type,
                    icon: iconMap[type]
                });
            });
            return l;
        });

        // ========== å°è©±æŒ‡æ¨™ ==========
        const conversationMetrics = computed(() => ({
            questionCount: Math.ceil(visibleMessages.value.filter(m => m.role === 'user').length),
            videoFrames: 150 + currentStep.value * 10
        }));

        const satisfactionScore = computed(() => {
            let score = 60 + currentStep.value * 3;
            if (currentStep.value > 10) score += 10;
            return Math.min(score, 98);
        });

        const sentimentType = computed(() => {
            if (satisfactionScore.value > 80) return 'positive';
            if (satisfactionScore.value > 50) return 'neutral';
            return 'negative';
        });

        const sentimentLabel = computed(() => {
            if (sentimentType.value === 'positive') return 'âœ“ éå¸¸æ»¿æ„';
            if (sentimentType.value === 'neutral') return 'â— ä¸­ç«‹';
            return 'âœ— éœ€æ”¹é€²';
        });

        // ========== æ“ä½œæ–¹æ³• ==========
        const nextStep = () => {
            if (currentStep.value < flow.length) {
                isScanning.value = true;
                setTimeout(() => {
                    currentStep.value++;
                    isScanning.value = false;
                    scrollToBottom();
                }, 500);
            }
        };

        const prevStep = () => { 
            if (currentStep.value > 1) {
                currentStep.value--;
                scrollToBottom();
            }
        };

        const goToStep = (step) => {
            currentStep.value = step;
            scrollToBottom();
        };

        const resetFlow = () => { 
            currentStep.value = 1; 
            showMenu.value = true;
            scrollToBottom();
        };

        const scrollToBottom = () => {
            nextTick(() => {
                const box = document.getElementById('chat-box');
                if (box) box.scrollTo({ top: box.scrollHeight, behavior: 'smooth' });
            });
        };

        return {
            // é…ç½®
            config, showConfigTip, onConfigChange,
            
            // ç‹€æ…‹
            currentStep, isScanning, showMenu,
            
            // è¨ˆç®—å±¬æ€§
            visibleMessages, currentStepLabel, currentStepScript,
            visibleChunks, currentLogs,
            conversationMetrics, satisfactionScore,
            sentimentType, sentimentLabel,
            
            // æ–¹æ³•
            nextStep, prevStep, resetFlow, goToStep
        };
    }
}).mount('#app');
</script>

<style>
@keyframes fade-in { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
.animate-fade-in { animation: fade-in 0.4s ease-out forwards; }

/* Vue éæ¸¡å‹•ç•« */
.fade-enter-active, .fade-leave-active {
    transition: opacity 0.3s ease;
}
.fade-enter-from, .fade-leave-to {
    opacity: 0;
}

/* æŒ‰éˆ•é»æ“Šå‹•ç•« */
button {
    position: relative;
    overflow: hidden;
}

button::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.5);
    transform: translate(-50%, -50%);
    pointer-events: none;
}

button:active::after {
    animation: ripple 0.6s ease-out;
}

@keyframes ripple {
    to {
        width: 300px;
        height: 300px;
        opacity: 0;
    }
}

/* çµ±è¨ˆå¡ç‰‡å‹•ç•«å»¶é² */
.stat-card:nth-child(1) { animation-delay: 0ms; }
.stat-card:nth-child(2) { animation-delay: 100ms; }
.stat-card:nth-child(3) { animation-delay: 200ms; }
.stat-card:nth-child(4) { animation-delay: 300ms; }

/* è¨Šæ¯é€²å…¥å‹•ç•« */
.chat-message-enter-active {
    animation: message-enter 0.3s ease-out;
}

@keyframes message-enter {
    from {
        opacity: 0;
        transform: translateY(16px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}
</style>

</body>
</html>